<div class="mt-4">
    <app-button-radio-active-new titulo="Registro de póliza" filtroBoton="btnsMantenimiento"
        cstyle="bg-gradient-primary text-white" [groupButton]="vmButtons" (onMetodoGlobal)="metodoGlobal($event)"
        icono="fas fa-file-alt">
        <div class="row m-0">
            <div class="col-12">
                <fieldset class="border card-fieldset">
                    <legend class="w-auto card-legend">Filtros</legend>
                    <div class class="col-12 filters pl-2 pr-2 ">
                        <div class="row m-0">
                            <div class="col-12 col-md-3 pt-0 pb-0">
                                <app-cc-input-group-prepend label="Num. Documento" styleSpan="size-span-campo font-weight-bold">
                                    <input class="form-control form-control-sm" [(ngModel)]="documento.num_documento"
                                        disabled />
                                </app-cc-input-group-prepend>
                            </div>
                            <div class="col-12 col-md-3 pt-0 pb-0">

                                <app-cc-input-group-prepend label="Proveedores" styleSpan="size-span-campo font-weight-bold">
                                    <input type="text" class="form-control form-control-sm" disabled
                                        placeholder="Seleccione un Proveedor" (click)="expandListProveedores()"
                                        [value]="proveedorActive.razon_social">
                                    <button class="btn btn-primary btn-sm" (click)="expandListProveedores()" placement="bottom"
                                        ngbTooltip="Buscar Proveedor" [disabled]="mantenimientoDisabled">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </app-cc-input-group-prepend>

 
                            </div>
                            <div class="col-12 col-md-3 pt-0 pb-0">
                                <app-cc-input-group-prepend label="Fecha" styleSpan="size-span-campo font-weight-bold">
                                    <input type="date" class="form-control form-control-sm" [(ngModel)]="documento.fecha"
                                        [disabled]="mantenimientoDisabled" />
                                    <!-- <button class="btn btn-primary btn-sm" (click)="modalGrupos()" [disabled]="disabledSubGrupo">Buscar</button> -->
                                </app-cc-input-group-prepend>
                            </div>
        
                            <div class="col-12 col-md-3 pt-0 pb-0">
                                <app-cc-input-group-prepend label="Tipo de póliza" styleSpan="size-span-campo font-weight-bold">
                                    <ng-select class="form-control custom" appendTo="body" [searchable]="true" [(ngModel)]="documento.tipo_poliza" [disabled]="mantenimientoDisabled">
                                      <ng-option  [value]= "0" disabled>Chosee.. </ng-option>
                                      <ng-option *ngFor="let item of listaCatalogo"  [value]="item">{{item}}</ng-option>
                                    </ng-select>
                                </app-cc-input-group-prepend>
                            </div>
        
                            <!-- <div class="col-3">
                                <app-cc-input-group-prepend label="Tipo de Poliza" styleSpan="size-span-campo font-weight-bold">
                                    <input  class="form-control form-control-sm" [(ngModel)]="documento.tipo_poliza"
                                        [disabled]="mantenimientoDisabled" />
                                </app-cc-input-group-prepend>
                            </div> -->
        
                        </div>
        
                        <div class="row m-0">
                            <div class="col-12 col-md-3 pt-0 pb-0">
                                <app-cc-input-group-prepend label="Numero de Poliza" styleSpan="size-span-campo font-weight-bold">
                                    <input  class="form-control form-control-sm" [(ngModel)]="documento.numero_poliza_contrato"
                                        [disabled]="mantenimientoDisabled" />
                                    <!-- <button class="btn btn-primary btn-sm" (click)="modalGrupos()" [disabled]="disabledSubGrupo">Buscar</button> -->
                                </app-cc-input-group-prepend>
                            </div>
                            <div class="col-12 col-md-3 pt-0 pb-0">
                                <app-cc-input-group-prepend label="Valor Asegurado" styleSpan="size-span-campo font-weight-bold">
                                    <input currencyMask class="form-control form-control-sm" [(ngModel)]="documento.valor_asegurado"
                                        [disabled]="mantenimientoDisabled" />
                                    <!-- <button class="btn btn-primary btn-sm" (click)="modalGrupos()" [disabled]="disabledSubGrupo">Buscar</button> -->
                                </app-cc-input-group-prepend>
                            </div>
                            <div class="col-12 col-md-3 pt-0 pb-0">
                                <app-cc-input-group-prepend label="Fecha Inicio" styleSpan="size-span-campo font-weight-bold">
                                    <input type="date" class="form-control form-control-sm" [(ngModel)]="documento.fecha_inicio"
                                        [disabled]="mantenimientoDisabled" />
                                    <!-- <button class="btn btn-primary btn-sm" (click)="modalGrupos()" [disabled]="disabledSubGrupo">Buscar</button> -->
                                </app-cc-input-group-prepend>
                            </div>
                            <div class="col-12 col-md-3 pt-0 pb-0">
                                <app-cc-input-group-prepend label="Fecha Fin" styleSpan="size-span-campo font-weight-bold">
                                    <input type="date" class="form-control form-control-sm" [(ngModel)]="documento.fecha_fin"
                                        [disabled]="mantenimientoDisabled" />
                                    <!-- <button class="btn btn-primary btn-sm" (click)="modalGrupos()" [disabled]="disabledSubGrupo">Buscar</button> -->
                                </app-cc-input-group-prepend>
                            </div>
                        </div>
        
        
                        <div class="row m-0">
                            <div class="col-12 col-md-8 pt-0 pb-0">

                                <app-cc-input-group-prepend label="Observaciones" styleSpan="size-span-campo font-weight-bold">
                                    <textarea cols="30" rows="3" maxlength="200" class="form-control form-control-sm"
                                    [(ngModel)]="documento.observaciones" [disabled]="mantenimientoDisabled"></textarea>
                                </app-cc-input-group-prepend>
   
                            </div>
        
                            <div class="col-12 col-md-4 pt-0 pb-0">

                                <app-cc-input-group-prepend label="Estado" styleSpan="size-span-campo font-weight-bold">
                                    <div class="form-control form-control-sm" style="background-color: #E4E6EA;">
                                        <i
                                            placement="bottom"
                                            [ngbTooltip]="(estado == 'P') ? 'Pendiente' : ((estado == 'C') ? 'Cerrado' : 'Cancelado')" 
                                            [class]="(estado == 'P') ? 'fas fa-circle text-warning' : ((estado == 'C') ? 'fas fa-circle text-success' : 'fas fa-circle text-danger')">
                                        </i>
                                        {{ (estado == 'P') ? 'Pendiente' : ((estado == 'C') ? 'Cerrado' : 'Cancelado') }}
                                    </div>
                                </app-cc-input-group-prepend>


                                
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>


        <div class="row m-0">
            <div class="col-12">
                <fieldset class="border card-fieldset">
                    <legend class="w-auto card-legend">Anexos</legend>
                    <div class="row m-0">
                        <div class="col-12 col-md-6 pt-0 pb-0">

                            <app-cc-input-group-prepend label="Archivo" styleSpan="size-span-campo font-weight-bold">
                                <div class="custom-file">
                                    <input type="file" multiple="multiple" class="custom-file-input" id="inputGroupFile01"
                                        accept=".pdf" (change)="cargaArchivo($event.target.files)" [disabled]="mantenimientoDisabled">
                                    <label class="custom-file-label" for="inputGroupFile01">{{ fileList !== undefined ?
                                        fileList[0].name : "Seleccione un archivo" }}</label>
                                    <!-- <button [disabled]="formReadOnly" class="btn btn-primary btn-sm" (click)="guardarArchivo()" placement="bottom" ngbTooltip="Guardar Archivo">
                                               Guardar
                                            </button> -->
                                </div>
                            </app-cc-input-group-prepend>

                            <!-- <div class="col-3"><button class="btn btn-sm btn-secondary" (click)="uploadFile()" [disabled]="anexoDisabled">Cargar</button></div> -->
                        </div>
                        <div class="col-12 col-md-6 pt-0 pb-0">
                            <app-anexos-list [identifier]="id_registro_poliza" custom1="INV-PRESTAMO-BIENES" [disabled]="mantenimientoDisabled"></app-anexos-list>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>


        <div class="row m-0">
            <div class="col-12">
                <fieldset class="border card-fieldset">
                    <legend class="w-auto card-legend">Productos</legend>

                    <div class="row m-0">
                        <div class="col-12 col-md-12 pt-0 pb-0 text-right">
                            <button class="btn btn-success btn-sm" placement="top" ngbTooltip="Agregar productos"
                            (click)="addProduct()" [disabled]="agregaProduct" [disabled]="mantenimientoDisabled">
                            <i class="fa fa-plus" aria-hidden="true"></i>
                        </button>
                        </div>
                    </div>
                    <div class="row m-0">
                        <div class="col-12  pl-3 pr-3 mt-2">
                            <table class="table table-striped table-bordered table-k table-hover" >
                                <thead class="sticky-header">
                                    <tr class="text-center">
                                        <th style="width: 15%;">Nombre</th>
                                        <th style="width: 15%;">Código</th>
                                        <th style="width: 15%;">Observación</th>
                                        <th style="width: 20%;" class="text-center">Acción</th>
                                    </tr>
                                </thead>
                                <tbody style="width: 100%;">
                                    <tr *ngFor="let d of producto; let i = index">
                                        <td>
                                            <div class="row">
                                                <div class="col">{{d.nombre}}</div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="row">
                                                <div class="col">{{d.codigoProducto}}</div>
                                            </div>
                                        </td>
                                        <td class="text-right">
                                            <div class="input-group input-group-sm">
                                                <input type="text" class="form-control form-control-sm" maxlength="200"
                                                    [(ngModel)]="d.observacion" [disabled]="mantenimientoDisabled">
                                            </div>
                                        </td>
                                        <td class="text-center">
                                            <button class="btn btn-sm btn-danger" placement="left" ngbTooltip="Remover producto"
                                                (click)="removeTitulo(i,d)" [disabled]="productoDisabled"><i
                                                    class="far fa-trash-alt"></i>
                                            </button>
                                        </td>
            
                                    </tr>
            
                                </tbody>
                            </table>
                        </div>
                    </div>


                </fieldset>
            </div>
        </div>









    </app-button-radio-active-new>
</div>
<cc-spiner-procesar [ltexto]="msgSpinner" lfulScren=true lTipo="spSales"></cc-spiner-procesar>