<div class="mt-2">
    <app-button-radio-active-new titulo="FICHA DE PRODUCTO" filtroBoton="btnIProducto" cstyle="bg-gradient-primary text-white"
        [groupButton]="vmButtons" (onMetodoGlobal)="metodoGlobal($event)" icono="fab fa-product-hunt">


        <fieldset class="border card-fieldset">
            <legend class="w-auto card-legend">Informacion General</legend>
            <div class="row m-0" *ngIf="permisions?.length > 0">
                <div class="col-12 col-md-12 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Grupos" styleSpan="size-span-campo font-weight-bold">
                        <input type="text" class="form-control form-control-sm" placeholder="Seleccione un Grupo"
                            (click)="modalGrupos()" [(ngModel)]="grupo_description"
                            [disabled]="permisions[0].editar == '0' || catalogoDisabled">
                        <div class="input-group-append">
                            <button class="btn btn-primary btn-sm" (click)="modalGrupos()" placement="bottom"
                                ngbTooltip="Buscar Grupo" [disabled]="permisions[0].editar == '0' || catalogoDisabled ">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </app-cc-input-group-prepend>
                </div>
            </div>

            <div class="row m-0">
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Estado" styleSpan="size-span-campo font-weight-bold">
                        <ng-select id="estado" class="form-control form-control-sm" [(ngModel)]="estado_ficha_prod"
                            [clearable]="false">
                            <ng-option disabled [value]="0" disabled>Seleccione un Estado</ng-option>
                            <ng-option *ngFor="let op of estadoList" [value]="op.value">{{ op.label }}</ng-option>
                        </ng-select>
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Departamento" styleSpan="size-span-campo">
                        <ng-select id="IdProvidersDoc" class="form-control" appendTo="body" [clearable]="false"
                            [disabled]="permisions[0].agregar == '0' || !disabledProduct || departamentoDisabled"
                            [(ngModel)]="ingresoDepartamento" [items]="departamento" bindValue="id_departamento"
                            bindLabel="dep_nombre">
                        </ng-select>
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Catalogo Bienes" styleSpan="size-span-campo font-weight-bold">
                        <input type="text" class="form-control form-control-sm" placeholder="Seleccione"
                            (click)="expandListDocumentosRec()" [(ngModel)]="codigoBienesDescripcion"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct ||catalogoDisabled">
                        <div class="input-group-append">
                            <button class="btn btn-primary btn-sm"
                                [disabled]="permisions[0].editar == '0' || !disabledProduct || catalogoDisabled"
                                matTooltip="Busca" (click)="expandListDocumentosRec()">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </app-cc-input-group-prepend>
                </div>
            </div>

            <div class="row m-0" *ngIf="permisions?.length > 0">
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Nombre Producto" styleSpan="size-span-campo">
                        <input type="text" class="form-control form-control-sm" #nam="ngModel" name="nam"
                            placeholder="Ingrese un nombre" id="idname" [(ngModel)]="nameData"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct || grupoDisabled">
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Nro. Ingreso Bodega" styleSpan="size-span-campo">
                        <input type="text" class="form-control form-control-sm" #nam="ngModel" name="nam" id="idname"
                            [(ngModel)]="nroIngresoBodega" disabled>
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-4 pt-0 pb-0">

                    <app-cc-input-group-prepend label="Fecha de Compra" styleSpan="size-span-campo font-weight-bold">
                        <input type="date" class="form-control" readonly [value]="produto?.fecha_compra">
                    </app-cc-input-group-prepend>
                </div>
            </div>

            <div class="row m-0" *ngIf="permisions?.length > 0">
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Código Producto" styleSpan="size-span-campo">
                        <input type="text" class="form-control form-control-sm" #nam="ngModel" name="nam"
                            [(ngModel)]="codigoData" disabled>
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Código Auxiliar" styleSpan="size-span-campo">
                        <input type="text" class="form-control form-control-sm" #codBa="ngModel" name="codBa"
                            placeholder="Ingrese código de barra" id="idCB" [(ngModel)]="codigo_auxiliar"
                            [disabled]="true">
                        <div class="input-group-text btn qr-code" id="inputLabel-prepend" data-toggle="tooltip"
                            data-placement="top" title="Ver código Qr" (click)="presentarCodBarra()" [hidden]="!dbQr">
                            <i class="fa fa-qrcode" aria-hidden="true"></i>
                        </div>
                    </app-cc-input-group-prepend>
                </div>

                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Fecha de Vencimiento"
                        styleSpan="size-span-campo font-weight-bold">
                        <input type="date" class="form-control form-control-sm"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct" [(ngModel)]="fecha_garantia">
                    </app-cc-input-group-prepend>
                </div>
                <!-- <div class="col-sm-3">
        <app-cc-input-group-prepend label="Número de Parte" styleSpan="size-span-campo">
            <input type="text" class="form-control form-control-sm" #numPar="ngModel" name="numPar" placeholder="Ingrese número de parte" id="idnumPar" [(ngModel)]="NumParteData" [disabled]="permisions[0].editar == '0' || !disabledProduct || disabledMateriaPrima">
        </app-cc-input-group-prepend>
    </div> -->

            </div>

            <div class="row m-0" *ngIf="permisions?.length > 0">

              
                <div class="col-12 col-md-4 pt-0 pb-0"
                    [ngClass]="{'d-none': tipo_bien_visibilidad == 'BLD' || tipo_bien_visibilidad == 'BCA' }">
                    <app-cc-input-group-prepend label="Perecible" styleSpan="size-span-campo font-weight-bold">
                        <ng-select class="form-control custom" appendTo="body" [searchable]="true"
                            [(ngModel)]="perecible" [disabled]="permisions[0].editar == '0' || !disabledProduct">
                            <ng-option [value]="0" disabled>Perecible</ng-option>
                            <ng-option [value]="'S'">SI</ng-option>
                            <ng-option [value]="'N'">NO</ng-option>
                        </ng-select>
                    </app-cc-input-group-prepend>
                </div>

                <div class="col-12 col-md-4 pt-0 pb-0 d-none">

                    <app-cc-input-group-prepend label="Fecha Caducidad" styleSpan="size-span-campo font-weight-bold">
                        <input type="date" class="form-control form-control-sm"
                            [disabled]="!disabledProduct  ||  perecible == 'N' ? true : false"
                            [(ngModel)]="fecha_caducidad">
                    </app-cc-input-group-prepend>

                </div>

                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Peligrosidad" styleSpan="size-span-campo font-weight-bold">
                        <ng-select class="form-control" appendTo="body" [clearable]="false" [(ngModel)]="peligrosidad"
                            [disabled]="!disabledProduct">
                            <ng-option [value]="0" disabled>Peligrosidad</ng-option>
                            <ng-option [value]="'S'">SI</ng-option>
                            <ng-option [value]="'N'">NO</ng-option>
                        </ng-select>
                    </app-cc-input-group-prepend>
                </div>

            </div>

            <div class="row m-0" *ngIf="permisions?.length > 0">
                <div class="col-12 col-md-6 pt-0 pb-0"
                    [ngClass]="{'d-none': tipo_bien_visibilidad == 'EXI' ||tipo_bien_visibilidad == 'EX' || tipo_bien_visibilidad == '' }">

                    <app-cc-input-group-prepend label="Observación peligrosidad" styleSpan="size-span-campo font-weight-bold">
                        <textarea cols="30" rows="3" class="form-control form-control-sm"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct  || peligrosidad == 'N' ? true : false"
                            [(ngModel)]="observacion_peligrosidad" maxlength="200"></textarea>
                    </app-cc-input-group-prepend>

                </div>
            </div>

            <div class="row m-0" *ngIf="permisions?.length > 0">
                <div class="col-12 col-md-3 pt-0 pb-0"
                    [ngClass]="{'d-none': tipo_bien_visibilidad == 'EXI' || tipo_bien_visibilidad == 'BCA' || tipo_bien_visibilidad == 'EX' || tipo_bien_visibilidad == '' }">
                    
                    <app-cc-input-group-prepend label="Años de vida útil" styleSpan="size-span-campo font-weight-bold">
                        <input type="text" class="form-control form-control-sm" [(ngModel)]="ano_vida_util"
                            [disabled]="!disabledProduct || serieDisabled  ? true : false">
                    </app-cc-input-group-prepend>

                </div>
                <div class="col-12 col-md-3 pt-0 pb-0"
                    [ngClass]="{'d-none': tipo_bien_visibilidad == 'EXI' || tipo_bien_visibilidad == 'EX' || tipo_bien_visibilidad == '' }">
                    
                    <app-cc-input-group-prepend label="Serie" styleSpan="size-span-campo font-weight-bold">
                        <input type="text" class="form-control form-control-sm" [(ngModel)]="serie"
                        [disabled]="permisions[0].editar == '0' || !disabledProduct || serieDisabled  ? true : false">
                    </app-cc-input-group-prepend>

  
                </div>
                <div class="col-12 col-md-6 pt-0 pb-0"
                    [ngClass]="{'d-none': tipo_bien_visibilidad == 'EXI' || tipo_bien_visibilidad == 'EX' || tipo_bien_visibilidad == '' }">
                    
                    <app-cc-input-group-prepend label="Tipo de Material" styleSpan="size-span-campo font-weight-bold">
                        <ng-select class="form-control custom" appendTo="body" [searchable]="true"
                        [(ngModel)]="tipo_material"
                        [disabled]="permisions[0].editar == '0' || !disabledProduct ||tipomaterialDisabled  ? true : false ">
                        <ng-option [value]="0" disabled>Chosee.. </ng-option>
                        <ng-option *ngFor="let item of listaCatalogo" [value]="item">{{item}}</ng-option>
                    </ng-select>
                    </app-cc-input-group-prepend>



                </div>

            </div>

            <div class="row m-0" *ngIf="permisions?.length > 0">
                <div class="col-12 col-md-6 pt-0 pb-0"
                    [ngClass]="{'d-none': tipo_bien_visibilidad == 'EXI' || tipo_bien_visibilidad == 'EX' || tipo_bien_visibilidad == '' }">
                    <app-cc-input-group-prepend label="Características del material"
                        styleSpan="size-span-campo font-weight-bold">
                        <textarea cols="30" rows="3" class="form-control form-control-sm"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct || observacionDisabled"
                            maxlength="200" [(ngModel)]="observacion_requerimiento">
                        </textarea>
                    </app-cc-input-group-prepend>

                </div>
                <div class="col-12 col-md-6 pt-0 pb-0"
                    [ngClass]="{'d-none': tipo_bien_visibilidad == 'BCA' || tipo_bien_visibilidad == 'BLD' ||tipo_bien_visibilidad == 'EXI' ||tipo_bien_visibilidad == 'EX' ||tipo_bien_visibilidad == ''  }">

                    <app-cc-input-group-prepend label="Vehículo" styleSpan="size-span-campo font-weight-bold">
                        <ng-select class="form-control custom" appendTo="body" [searchable]="true"
                            [(ngModel)]="vehiculo" [disabled]="permisions[0].editar == '0' || !disabledProduct">
                            <ng-option [value]="0" disabled>Vehículo</ng-option>
                            <ng-option [value]="'S'">SI</ng-option>
                            <ng-option [value]="'N'">NO</ng-option>
                        </ng-select>
                    </app-cc-input-group-prepend>
                </div>

            </div>

            <div class="row m-0">
                <div class="col-12 col-md-4 pt-0 pb-0">
                   
                    <app-cc-input-group-prepend label="Es Vehiculo" styleSpan="size-span-campo font-weight-bold">
                        <ng-select [items]="cmb_vehiculo" bindValue="value" bindLabel="label" [(ngModel)]="vehiculo"
                            class="form-control" [readonly]="!disabledProduct" [clearable]="false">
                        </ng-select>
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Nro. Vehículo" styleSpan="size-span-campo font-weight-bold">
                        <input class="form-control form-control-sm"
                            [disabled]="!disabledProduct  ||  vehiculo != 'S' ? true : false"
                            [(ngModel)]="nro_vehiculo">
                    </app-cc-input-group-prepend>

                </div>
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Placa" styleSpan="size-span-campo font-weight-bold">
                        <input class="form-control form-control-sm"
                            [disabled]="!disabledProduct  ||  vehiculo != 'S' ? true : false" [(ngModel)]="placa">
                    </app-cc-input-group-prepend>


                </div>
            </div>

            <div class="row m-0">

               <div class="col-12 col-md-4 pt-0 pb-0">

                <app-cc-input-group-prepend label="Numero chasis" styleSpan="size-span-campo font-weight-bold">

                    <input class="form-control form-control-sm"
                    [disabled]="!disabledProduct  ||  vehiculo != 'S' ? true : false"
                    [(ngModel)]="numero_chasis">
                </app-cc-input-group-prepend>


                </div>
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Motor" styleSpan="size-span-campo font-weight-bold">
                        <input class="form-control form-control-sm"
                            [disabled]="!disabledProduct  ||  vehiculo != 'S' ? true : false" [(ngModel)]="motor">

                    </app-cc-input-group-prepend>


                </div>
            </div>








        </fieldset>

        <fieldset [hidden]="disabledCustodio" class="border card-fieldset">
            <legend class="w-auto card-legend">Información de Custodio</legend>
             <div class="row m-0">
                <div class="col-12 col-md-6 pt-0 pb-0">

                    <app-cc-input-group-prepend label="Departamento" styleSpan="input-group-text size-span-campo">
                        <input type="text" class="form-control form-control-sm" [maxlength]="20"
                            [(ngModel)]="depCustodio" [disabled]="true">
                    </app-cc-input-group-prepend>



                </div>

                <div class="col-12 col-md-6 pt-0 pb-0">

                    <app-cc-input-group-prepend label="Custodio" styleSpan="input-group-text size-span-campo">
                        <input type="text" class="form-control form-control-sm" [maxlength]="20"
                            [(ngModel)]="nombreCustodio" [disabled]="true">
                    </app-cc-input-group-prepend>



                </div>
            </div>
        </fieldset>

        <fieldset [hidden]="disabledResponsable" class="border card-fieldset">
            <legend class="w-auto card-legend">Información de Responsable</legend>



            <div class="row m-0">
                <div class="col-12 col-md-6 pt-0 pb-0">

                    <app-cc-input-group-prepend label="Departamento" styleSpan="input-group-text size-span-campo">
                        <input type="text" class="form-control form-control-sm" [maxlength]="20"
                            [(ngModel)]="depResponsable" [disabled]="true">
                    </app-cc-input-group-prepend>



                </div>

                <div class="col-12 col-md-6 pt-0 pb-0">

                    <app-cc-input-group-prepend label="Responsable" styleSpan="input-group-text size-span-campo">
                        <input type="text" class="form-control form-control-sm" [maxlength]="20"
                            [(ngModel)]="nombreResponsable" [disabled]="true">
                    </app-cc-input-group-prepend>



                </div>
            </div>
        </fieldset>
        <fieldset class="border card-fieldset">
            <legend class="w-auto card-legend">Anexos</legend>
            <div class="row m-0">
                <div class="col-12">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span style="width: 155px;"
                                class="input-group-text font-weight-bold">Fotos</span></div>
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="inputGroupFile01" accept="image/*"
                                multiple [disabled]=" !disabledProduct" (change)="cargaFoto($event.target.files)">
                            <label class="custom-file-label" for="inputGroupFile01">{{ fotos.length > 0 ? "Ha
                                seleccionado " + fotos.length + " Fotos" : "Seleccione fotos a subir" }}</label>
                        </div>
                    </div>
                    <div class="multiple-image-container">
                        <div *ngFor='let foto of fotos, let i = index' class="multiple-image-preview">
                            <img [src]="foto.recurso" (click)="expandirVistaFotos(i)" class="img-thumbnail">
                            <button *ngIf="!formReadOnly"
                                [disabled]="permisions[0].editar == '0' || !disabledProduct"
                                class="btn btn-sm btn-danger" placement="top" ngbTooltip="Eliminar Foto"
                                (click)="removeFoto(i)"><i class="far fa-trash-alt"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>

        <fieldset class="border card-fieldset">
            <legend class="w-auto card-legend">Informacion Complementaria</legend>
            <div class="row m-0" *ngIf="permisions?.length > 0">
                <div class="col-12 col-md-6 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Marca" styleSpan="size-span-campo">
                        <ng-select class="form-control custom" appendTo="body" [searchable]="true" [clearable]="false"
                            [(ngModel)]="marcaSelect"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct || disabledMateriaPrima"
                            id="idMarcaSelect" (ngModelChange)="selectedModels($event)">
                            <ng-option [value]="0">Seleccione Marca
                            </ng-option>
                            <ng-option *ngFor="let d of dataMarcas" [value]="d.valor">{{d.valor}}
                            </ng-option>
                        </ng-select>
                        
                            <button class="btn btn-sm btn-primary"
                                [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima"
                                data-toggle="tooltip" data-placement="top" title="Crear marca"
                                (click)="setCatalogoTitle('Ingreso de nueva marca','MARCAS','Marca')"
                                >
                                <i class="fa fa-plus" aria-hidden="true"></i>
                            </button>
                       
                    </app-cc-input-group-prepend>
                </div>

                <!-- <div class="col-sm-3">
                    <app-cc-input-group-prepend label="Grupo" styleSpan="size-span-campo">
                        <ng-select class="form-control custom" appendTo="body" [searchable]="true" [clearable]="false"
                            [(ngModel)]="grupoSelect" [disabled]="permisions[0].editar == '0' || !disabledProduct "
                            id="idGrupo">
                            <ng-option [value]="0">Seleccione Grupo
                            </ng-option>
                            <ng-option *ngFor="let d of dataGrupo" [value]="d.id_grupo">{{d.nombre}}
                            </ng-option>
                        </ng-select>
                    </app-cc-input-group-prepend>
                </div> -->

                <div class="col-sm-6">
                    <app-cc-input-group-prepend label="Unidad de Medida" styleSpan="size-span-campo">
                        <ng-select class="form-control" [searchable]="false" [clearable]="false" [items]="dataUDM"
                            bindValue="valor" bindLabel="valor" [(ngModel)]="udmcSelect"
                            [readonly]="permisions[0].editar == '0' || !disabledProduct || disabledMateriaPrima"
                            id="idUDMC">
                        </ng-select>
                        
                            <button class="btn btn-sm btn-primary" matTooltip="Nueva Unidad de Medida"
                                (click)="expandUdm()"
                                [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima">
                                <i class="fas fa-plus"></i>
                            </button>
                      
                    </app-cc-input-group-prepend>
                </div>
            </div>

            <div class="row m-0" *ngIf="permisions?.length > 0">
                <div class="col-12 col-md-3 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Modelo" styleSpan="size-span-campo">
                        <ng-select class="form-control custom" appendTo="body" [searchable]="true" [clearable]="false"
                            [(ngModel)]="modeloSelect"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct || disabledMateriaPrima || disableMarca"
                            id="idModeloSelect">
                            <ng-option [value]="0">Seleccione Modelo
                            </ng-option>
                            <ng-option *ngFor="let d of dataModelos" [value]="d.valor">{{d.valor}}
                            </ng-option>
                        </ng-select>
                        
                            <button class="btn btn-sm btn-primary"
                                [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima"
                                data-toggle="tooltip" data-placement="top" title="Crear modelo"
                                (click)="setCatalogoTitle('Ingreso de nuevo modelo','MODELOS','Modelo')"
                               >
                                <i class="fa fa-plus" aria-hidden="true"></i>
                            </button>
                        
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-3 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Color" styleSpan="size-span-campo">
                        <ng-select class="form-control custom" appendTo="body" [searchable]="true" [clearable]="false"
                            [(ngModel)]="colorSelect"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct || disabledMateriaPrima"
                            id="idColorSelect">
                            <ng-option [value]="0">Seleccione Color
                            </ng-option>
                            <ng-option *ngFor="let d of dataColores" [value]="d.valor">{{d.valor}}
                            </ng-option>
                        </ng-select>
                        
                            <button class="btn btn-sm btn-primary"
                                [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima"
                                data-toggle="tooltip" data-placement="top" title="Crear color"
                                (click)="setCatalogoTitle('Ingreso de nuevo color','COLORES','Color')"
                                >
                                <i class="fa fa-plus" aria-hidden="true"></i>
                            </button>
                       
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-3 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Origen" styleSpan="size-span-campo">
                        <ng-select class="form-control custom" appendTo="body" [searchable]="true" [clearable]="false"
                            [(ngModel)]="origenData" id="idOrigen"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct || disabledMateriaPrima">
                            <ng-option [value]="0">Seleccione Origen</ng-option>
                            <ng-option *ngFor="let d of arrayCountrys" [value]="d.nom_pais">{{d.nom_pais}}
                            </ng-option>
                        </ng-select>
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-3 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Tipo Compra" styleSpan="size-span-campo">
                        <select class="form-control form-control-sm custom-select" [(ngModel)]="TipoCompraSelect"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct" id="idTipoCompra">
                            <option [value]="0">Seleccione Tipo Compra
                            </option>
                            <option *ngFor="let d of dataTipoCompra" [value]="d.id">{{d.nombre}}
                            </option>
                        </select>
                    </app-cc-input-group-prepend>
                </div>

            </div>
            <div class="row m-0" *ngIf="permisions?.length > 0">


                <div class="col-12 col-md-3 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Costo" styleSpan="size-span-campo">
                        <input currencyMask class="form-control" [(ngModel)]="costoData"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct  || stockDisabled">
                    </app-cc-input-group-prepend>
                </div>

                <div class="col-12 col-md-3 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Stock" styleSpan="size-span-campo">
                        <input type="number" class="form-control" [value]="stock" min="0" [disabled]="true">
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-3 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Stock Minimo" styleSpan="size-span-campo">
                        <input type="number" class="form-control form-control-sm" #SMi="ngModel" name="SMi"
                            placeholder="Ingrese Stock mínimo" id="idSMinimo" [(ngModel)]="minimoData" min="0"
                            (keypress)="commonServices.FormatDecimalVal($event)"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct || disabledMateriaPrima">
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-3 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Stock Máximo" styleSpan="size-span-campo">
                        <input type="number" class="form-control form-control-sm" #SMA="ngModel" name="SMA"
                            placeholder="Ingrese Stock máximo" id="idSMaximo" [(ngModel)]="maximoData" min="0"
                            (keypress)="commonServices.FormatDecimalVal($event)"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct || disabledMateriaPrima ">
                    </app-cc-input-group-prepend>
                </div>
            </div>

            <div class="row m-0" *ngIf="permisions?.length > 0">

                <div class="col-12 col-md-3 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Stock Surgerido" styleSpan="size-span-campo">
                        <input type="number" class="form-control form-control-sm text-right" #SSuger="ngModel"
                            name="SSuger" placeholder="ingrese stock sugerido" id="idSSugerido"
                            [(ngModel)]="sugeridoData" min="0" (keypress)="commonServices.FormatDecimalVal($event)"
                            [disabled]="permisions[0].editar == '0' || !disabledProduct || disabledMateriaPrima ||stockDisabled">
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-3 pt-0 pb-0" *ngIf="stockActualData">
                    <app-cc-input-group-prepend label="Stock Actual" styleSpan="size-span-campo">
                        <input type="text" class="form-control form-control-sm text-right" #stockd="ngModel"
                            name="stockd" id="idstockaData" [(ngModel)]="stockaData" min="0"
                            [disabled]="true ||stockDisabled">
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-3 pt-0 pb-0" [ngClass]="{'d-none': tipo_bien_visibilidad != 'EXI'}">
                    <app-cc-input-group-prepend label="Fecha Ultima Compra"
                        styleSpan="size-span-campo font-weight-bold">
                        <input type="text" name="" id="" class="form-control" readonly [value]="fechaUltimaCompra">
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-3 pt-0 pb-0" [ngClass]="{'d-none': tipo_bien_visibilidad != 'EXI'}">
                    <app-cc-input-group-prepend label="Precio Ultima Compra"
                        styleSpan="size-span-campo font-weight-bold">
                        <input currencyMask class="form-control" readonly [value]="precioUltimaCompra">
                    </app-cc-input-group-prepend>

                </div>

            </div>

            <div class="row m-0">
                <div class="col-12 col-md-3 pt-0 pb-0" [ngClass]="{'d-none': tipo_bien_visibilidad == 'EXI'}">
                    <app-cc-input-group-prepend label="Estado del Bien" styleSpan="size-span-campo font-weigth-bold">
                        <ng-select class="form-control" [(ngModel)]="selectedEstadoBien" [clearable]="false"
                            [readonly]="!disabledProduct" [items]="cmb_estado_bien" bindValue="value"
                            bindLabel="label"></ng-select>
                    </app-cc-input-group-prepend>
                </div>
            </div>

            <div class="row m-0" *ngIf="permisions?.length > 0">
                <div class="col-12 col-md-6 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Nota" styleSpan="size-span-campo font-weight-bold">
                        <textarea name="observation" class="form-control form-control-sm cls-textarea" rows="4"
                            placeholder="Observaciones" [disabled]="permisions[0].agregar == '0' || !disabledProduct"
                            [(ngModel)]="observation"></textarea>
                    </app-cc-input-group-prepend>

   
                </div>
            </div>
        </fieldset>
        



        <fieldset class="border card-fieldset" [ngClass]="{'d-none': tipo_bien_visibilidad != 'BLD'}">
            <legend class="w-auto card-legend">Depreciaci&oacute;n</legend>



            <div class="row m-0">
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Costo Original" styleSpan="size-span-campo font-weight-bold">
                        <input type="text" readonly class="form-control" [value]="produto?.costo">
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Depreciado" styleSpan="size-span-campo font-weight-bold">
                        <input type="text" readonly class="form-control" [value]="produto?.depreciacion_acumulada">
                    </app-cc-input-group-prepend>
                </div>
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Costo Actual" styleSpan="size-span-campo font-weight-bold">
                        <input type="text" readonly class="form-control" [value]="produto?.costo_actual">
                    </app-cc-input-group-prepend>
                </div>
            </div>
            <div class="row m-0">
                <div class="col-12 col-md-4 pt-0 pb-0">
                    <app-cc-input-group-prepend label="Metodo de Depreciacion"
                        styleSpan="size-span-campo font-weigth-bold">



                        <ng-select class="form-control form-control-sm" 
                            [(ngModel)]="selectedMetodoDepreciacion"
                            [clearable]="false">
                            <ng-option [value]="" [disabled]="true">Seleccione</ng-option>

                            <ng-option [value]="item.valor" 
                                *ngFor="let item of cmb_metodo_depreciacion">
                                {{item.descripcion}}
                            </ng-option>



                        </ng-select>

                    </app-cc-input-group-prepend>

                </div>



            </div>
        </fieldset>



        <div class="row m-0">
            <div class="col-12">
                <div class="mb-3">
                    <nav class="mt-2">
                        <div class="nav nav-tabs border-0" id="nav-tab" role="tablist">
                            <a class="tab-label text-center active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab"
                                aria-controls="nav-home" aria-selected="true">Historial de mantenimiento</a>
                            <a class="tab-label text-center" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab"
                                aria-controls="nav-profile" aria-selected="false">Historial de traslado</a>
                            <a class="tab-label text-center" id="nav-actas-tab" data-toggle="tab" href="#nav-actas" role="tab"
                                aria-controls="nav-actas" aria-selected="false">Historial de póliza</a>
                            <a class="tab-label text-center" id="nav-bodega-tab" data-toggle="tab" href="#nav-bodega" role="tab"
                                aria-controls="nav-bodega" aria-selected="false">Bodega</a>
                            <a class="tab-label text-center" id="nav-costos-tab" data-toggle="tab" href="#nav-costos" role="tab"
                                aria-controls="nav-costos" aria-selected="false">Costos Adicionales</a>
                            <a class="tab-label text-center" id="nav-lotes-tab" data-toggle="tab" href="#nav-lotes" role="tab"
                                aria-controls="nav-lotes" aria-selected="false">Lotes</a>
                            <a class="tab-label text-center" id="nav-auditoria-tab" data-toggle="tab" href="#nav-auditoria" role="tab"
                                aria-controls="nav-auditoria" aria-selected="false">Auditoria</a>
                            <a class="tab-label text-center" id="nav-reclamos-tab" data-toggle="tab" href="#nav-reclamos" role="tab"
                                aria-controls="nav-reclamos" aria-selected="false">Gestion de Reclamos</a>
                            <a *ngIf="tipo_bien_visibilidad == 'EXI'" class="tab-label text-center" id="nav-tendencia-tab"
                                data-toggle="tab" href="#nav-tendencia" role="tab" aria-controls="nav-tendencia"
                                aria-selected="false">Tendencia</a>
                            <a *ngIf="tipo_bien_visibilidad == 'EXI'" class="tab-label text-center" id="nav-stock-tab" data-toggle="tab"
                                href="#nav-stock" role="tab" aria-controls="nav-stock" aria-selected="false">Stock</a>
                            <a *ngIf="tipo_bien_visibilidad == 'BLD'" class="tab-label text-center" id="nav-depreciacion-tab" 
                            data-toggle="tab"
                                href="#nav-depreciacion" role="tab" aria-controls="nav-depreciacion" aria-selected="false">Tabla de Depreciación</a>
                        </div>
                    </nav>
                </div>
            </div>
        </div>





       

 
        

        <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">

                <div class="row m-0">
                    <div class="col-12">
                        <fieldset class="border card-fieldset">
                            <table class="table table-striped table-bordered table-k table-hover" >
                                <thead class="sticky-header">
                                    <tr class="text-center">
            
                                        <th style="width: 20%;">Num. Documento</th>
                                        <th style="width: 20%;">Fecha</th>
                                        <th style="width: 20%;">Estado</th>
                                        <th style="width: 20%;">Acciones</th>
                                        <!-- <th style="width: 20%;">Departamento </th>
                                        <th style="width: 20%;">Recibido por</th>
                                        <th style="width: 10%;">Estado del bien</th> -->
            
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let dt of mantenimiento; let i = index">
                                        <!-- <td class="text-center">{{ dt.codigo_grupo_producto}}</td> -->
            
            
                                        <td class="text-center">{{ dt.mantenimiento?.num_documento}}</td>
                                        <td class="text-center">{{ dt.mantenimiento?.fecha }}</td>
                                        <td *ngIf="dt.mantenimiento.estado == 'P'" class="text-center">
                                            <i class="fas fa-circle text-warning"></i> PENDIENTE
                                        </td>
                                        <td *ngIf="dt.mantenimiento.estado == 'C'" class="text-center">
                                            <i class="fas fa-circle text-success"></i> CERRADO
                                        </td>
                                        <td>
                                            <div class="text-center mx-auto">
                                                <button class="btn btn-primary btn-sm mx-1"
                                                    (click)="mostrarFormLTur(dt,'mantenimiento')" placement="left"
                                                    ngbTooltip="Visualizar detalle">
                                                    <i class="far fa-eye"></i>
                                                </button>
            
            
            
                                            </div>
                                        </td>
                                        <!-- <td class="text-center">{{ dt.traslado.nombre_departamento_recibido }}</td>
                                        <td class="text-center">{{ dt.traslado.nombre_persona_recibido }}</td> -->
                                        <!-- <td class="text-center">{{ dt.estado}} </td> -->
                                        <!-- <td *ngIf="dt.estado == 'R'" class="text-center">
                                            <i class="fas fa-circle text-success"></i> REGULAR
                                        </td>
                                        <td *ngIf="dt.estado == 'M'" class="text-center">
                                            <i class="fas fa-circle text-danger"></i> MALO
                                        </td>
                                        <td *ngIf="dt.estado == 'B'" class="text-center">
                                            <i class="fas fa-circle text-danger"></i> BUENO
                                        </td>
                                       -->
            
                                    </tr>
                                </tbody>
                            </table>
                            <mat-paginator showFirstLastButtons [length]="paginate.length" [pageSize]="paginate.perPage"
                                [pageSizeOptions]="paginate.pageSizeOptions" (page)="changePaginate($event)"
                                aria-label="Select page">
                            </mat-paginator>
                        </fieldset>
                    </div>
                </div>


            </div>

            <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">

                <div class="row m-0">
                    <div class="col-12">
                        <fieldset class="border card-fieldset">
                            <table class="table table-striped table-bordered table-k table-hover" >
                                <thead class="sticky-header">
                                    <tr class="text-center">
            
                                        <th style="width: 20%;">Num. Documento</th>
                                        <th style="width: 10%;">Fecha</th>
                                        <th style="width: 20%;">Traslado por</th>
                                        <th style="width: 10%;">Departamento </th>
                                        <th style="width: 20%;">Recibido por</th>
                                        <th style="width: 10%;">Estado del bien</th>
                                        <th style="width: 10%;">Acciones</th>
            
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let dt of traslado; let i = index">
                                        <!-- <td class="text-center">{{ dt.codigo_grupo_producto}}</td> -->
            
            
                                        <td class="text-center">{{ dt.traslado.num_doc}}</td>
                                        <td class="text-center">{{ dt.traslado.fecha }}</td>
                                        <td class="text-center">{{ dt.traslado.traslado_por }}</td>
                                        <td class="text-center">{{ dt.traslado.nombre_departamento_custodio }}</td>
                                        <td class="text-center">{{ dt.traslado.nombre_persona_custodio }}</td>
                                        <!-- <td class="text-center">{{ dt.estado}} </td> -->
                                        <td *ngIf="dt.estado == 'R'" class="text-center">
                                            <i class="fas fa-circle text-warning"></i> REGULAR
                                        </td>
                                        <td *ngIf="dt.estado == 'M'" class="text-center">
                                            <i class="fas fa-circle text-danger"></i> MALO
                                        </td>
                                        <td *ngIf="dt.estado == 'B'" class="text-center">
                                            <i class="fas fa-circle text-success"></i> BUENO
                                        </td>
            
                                        <td>
                                            <div class="text-center mx-auto">
                                                <button class="btn btn-primary btn-sm mx-1" (click)="mostrarFormLTur(dt,'traslado')"
                                                    placement="left" ngbTooltip="Visualizar detalle">
                                                    <i class="far fa-eye"></i>
                                                </button>
                                            </div>
                                        </td>
            
            
                                    </tr>
                                </tbody>
                            </table>
                            <mat-paginator showFirstLastButtons [length]="paginate.length" [pageSize]="paginate.perPage"
                                [pageSizeOptions]="paginate.pageSizeOptions" (page)="changePaginate($event)"
                                aria-label="Select page">
                            </mat-paginator>
                        </fieldset>
                    </div>
                </div>



            </div>

            <div class="tab-pane fade" id="nav-actas" role="tabpanel" aria-labelledby="nav-actas-tab">

                <div class="row m-0">
                    <div class="col-12">
                        <fieldset class="border card-fieldset">
                            <table class="table table-striped table-bordered table-k table-hover" >
                                <thead class="sticky-header">
                                    <tr class="text-center">
            
                                        <th style="width: 20%;">Num. Documento</th>
                                        <th style="width: 10%;">Fecha</th>
                                        <th style="width: 20%;">Num. Póliza</th>
                                        <th style="width: 20%;">Valor asegurado </th>
                                        <th style="width: 20%;">Acciones</th>
            
            
            
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let dt of poliza; let i = index">
                                        <!-- <td class="text-center">{{ dt.codigo_grupo_producto}}</td> -->
            
            
                                        <td class="text-center">{{ dt.poliza?.num_documento}}</td>
                                        <td class="text-center">{{ dt.poliza?.fecha }}</td>
                                        <td class="text-center">{{ dt.poliza?.numero_poliza_contrato }}</td>
                                        <td class="text-center">{{ dt.poliza?.valor_asegurado}}</td>
            
                                        <td>
                                            <div class="text-center mx-auto">
                                                <button class="btn btn-primary btn-sm mx-1" (click)="mostrarFormLTur(dt,'poliza')"
                                                    placement="left" ngbTooltip="Visualizar detalle">
                                                    <i class="far fa-eye"></i>
                                                </button>
                                            </div>
                                        </td>
            
            
            
            
                                    </tr>
                                </tbody>
                            </table>
                            <mat-paginator showFirstLastButtons [length]="paginate.length" [pageSize]="paginate.perPage"
                                [pageSizeOptions]="paginate.pageSizeOptions" (page)="changePaginate($event)"
                                aria-label="Select page">
                            </mat-paginator>
                        </fieldset>
                    </div>
                </div>




            </div>

            <div class="tab-pane fade" id="nav-bodega" role="tabpanel" aria-labelledby="nav-bodega-tab">


                <div class="row m-0">
                    <div class="col-12">
                        <fieldset class="border card-fieldset">
                            <div class="col text-right">
                                <button class="btn btn-success btn-sm ml-1" placement="left" ngbTooltip="Guardar Ubicacion"
                                    (click)="guardarProductoBodega()">
                                    <i class="fas fa-save"></i> Guardar
                                </button>
                                <button class="btn btn-success btn-sm ml-1" placement="left" ngbTooltip="Agregar bodega"
                                    [disabled]="bodegaDisabled || formReadOnly" (click)="expandModalBodega()">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <table class="table table-striped table-bordered table-k table-hover" >
                                <thead class="sticky-header">
                                    <tr class="text-center">
            
                                        <th style="width: 5%;">Id</th>
                                        <th style="width: 20%;">Nombre Bodega</th>
                                        <th style="width: 20%;">Tipo almacenamiento</th>
                                        <th style="width: 10%;">Fila</th>
                                        <th style="width: 10%;">Columna</th>
                                        <th style="width: 15%;">Código</th>
                                        <th style="width: 15%;">Dimensión</th>
                                        <th style="width: 15%;">Acción</th>
            
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let dt of bodegas; let i = index">
                                        <td class="text-center"> {{ dt.id_bodega_det}}</td>
                                        <td class="text-center"> {{ dt.bodega.nombre}}</td>
                                        <td class="text-center"> {{ dt.tipo_almacenamiento}}</td>
                                        <td class="text-center"> {{ dt.fila}}</td>
                                        <td class="text-center"> {{ dt.columna}}</td>
                                        <td class="text-center"> {{ dt.codigo}}</td>
                                        <td class="text-center"> {{ dt.dimension}}</td>
                                        <td class="text-center">
                                            <button class="btn btn-sm btn-danger" placement="left" ngbTooltip="Remover Ubicacion"
                                                (click)="removeUbicacion(i)"><i class="far fa-trash-alt"></i></button>
                                        </td>
                                    </tr>
                                    <!--<tr *ngFor="let dt of mantenimiento; let i = index">
                                        <td class="text-center">{{ dt.mantenimiento.num_documento}}</td>
                                        <td class="text-center">{{ dt.mantenimiento.fecha }}</td>
                                        <td *ngIf="dt.mantenimiento.estado == 'P'" class="text-center">
                                            <i class="fas fa-circle text-warning"></i> PENDIENTE
                                        </td>
                                        <td *ngIf="dt.mantenimiento.estado == 'C'" class="text-center">
                                            <i class="fas fa-circle text-success"></i> CERRADO
                                        </td>
                                        <td>
                                            <div class="text-center mx-auto">
                                                <button class="btn btn-primary btn-sm mx-1" (click)="mostrarFormLTur(dt,'mantenimiento')" placement="left" ngbTooltip="Visualizar detalle">
                                                    <i class="far fa-eye"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>-->
                                </tbody>
                            </table>
                            <mat-paginator showFirstLastButtons [length]="paginate.length" [pageSize]="paginate.perPage"
                                [pageSizeOptions]="paginate.pageSizeOptions" (page)="changePaginate($event)"
                                aria-label="Select page">
                            </mat-paginator>
                        </fieldset>
                    </div>
                </div>


            </div>

            <div class="tab-pane fade" id="nav-costos" role="tabpanel" aria-labelledby="nav-costos-tab">

                <div class="row m-0">
                    <div class="col-12">
                        <fieldset class="border card-fieldset">
                            <div class="row m-0">
                                <div class="col-12 col-md-6 pt-0 pb-0">
                                    <app-cc-input-group-prepend label="Concepto" styleSpan="size-span-campo font-weight-bold">
                                        <ng-select class="form-control" [readonly]="produto == undefined" [clearable]="false"
                                            [items]="conceptos" bindValue="codigo" bindLabel="nombre"
                                            (change)="seleccionaConcepto($event)"></ng-select>
                                        <div class="input-group-append">
                                            <button class="btn btn-success" (click)="agregarConcepto()"
                                                [disabled]="produto == undefined">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                    </app-cc-input-group-prepend>
                                </div>
                                <div class="col-12 col-md-6 pt-0 pb-0">
                                    <button class="btn btn-sm btn-success float-right" (click)="almacenarCostos()"
                                        [disabled]="produto == undefined || costos.length == 0">
                                        <i class="fas fa-floppy-o"></i> GUARDAR
                                    </button>
                                </div>
                            </div>
                            <table class="table table-striped table-bordered table-k table-hover" >
                                <thead class="sticky-header">
                                    <tr class="text-center">
                                        <th>Fecha</th>
                                        <th>Descripcion</th>
                                        <th>Comentario</th>
                                        <th>Costo</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngIf="!costos.length">
                                        <td colspan="4" class="text-center">
                                            <p class="h6">No hay costos adicionales asociados</p>
                                        </td>
                                    </tr>
                                    <tr *ngFor="let costo of costos">
                                        <td>{{ costo.fecha }}</td>
                                        <td>{{ costo.descripcion }}</td>
                                        <td class="w-50">
                                            <input type="text" class="form-control form-control-sm" [(ngModel)]="costo.observacion">
                                        </td>
                                        <td>
                                            <app-cc-input-group-prepend label="$" styleSpan="font-weight-bold">
                                                <input type="number" class="form-control text-right" min="0"
                                                    [(ngModel)]="costo.valor">
                                            </app-cc-input-group-prepend>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-danger" (click)="eliminarCosto(costo)">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </fieldset>
                    </div>
                </div>


            </div>

            <div class="tab-pane fade" id="nav-lotes" role="tabpanel" aria-labelledby="nav-lotes-tab">
                <div class="row m-0">
                    <div class="col-12">
                        <fieldset class="border card-fieldset">
                                            
                <table class="table table-striped table-bordered table-k table-hover" >
                    <thead class="sticky-header">
                        <tr class="text-center">
                            <th>Cantidad</th>
                            <th>Lote</th>
                            <th>Fecha de Caducidad</th>
                            <th>Disponible</th>
                            <th>Despachado</th>
                            <th># Ingreso</th>
                            <th>Bodega</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngIf="!lotes.length">
                            <td colspan="6" class="text-center">
                                <p class="h6">No hay detalles de Lote para este producto</p>
                            </td>
                        </tr>
                        <tr *ngFor="let lote of lotes">
                            <td>{{ lote.cantidad }}</td>
                            <td>{{ lote.lote }}</td>
                            <td>{{ lote.fecha_caducidad }}</td>
                            <td>{{ lote.disponible }}</td>
                            <td>{{ lote.despachado }}</td>
                            <td>{{ lote.num_ingreso_bodega }}</td>
                            <td>{{ lote.bodega?.nombre }}</td>
                        </tr>
                    </tbody>
                </table>
                        </fieldset>
                    </div>
                </div>

            </div>

            <div class="tab-pane fade" id="nav-auditoria" role="tabpanel" aria-labelledby="nav-auditoria-tab">
                <div class="row m-0">
                    <div class="col-12">
                        <fieldset class="border card-fieldset">
                            <table class="table table-striped table-bordered table-k table-hover" >
                                <thead class="sticky-header">
                                    <tr class="text-center">
                                        <th>Precio Ant. 2</th>
                                        <th>Precio Ant. 3</th>
                                        <th>Precio Ant. 1</th>
                                        <th>Precio Ant. 4</th>
                                        <th>Precio Ant. 5</th>
                                        <th>Precio Act. 1</th>
                                        <th>Precio Act. 2</th>
                                        <th>Precio Act. 3</th>
                                        <th>Precio Act. 4</th>
                                        <th>Precio Act. 5</th>
                                        <th>Usuario</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngIf="!produto?.auditoria.length">
                                        <td class="text-center" colspan="11">
                                            <p class="h6">No hay cambios registrados</p>
                                        </td>
                                    </tr>
                                    <tr *ngFor="let item of produto?.auditoria">
                                        <td>${{ item.precio1_anterior }}</td>
                                        <td>${{ item.precio2_anterior }}</td>
                                        <td>${{ item.precio3_anterior }}</td>
                                        <td>${{ item.precio4_anterior }}</td>
                                        <td>${{ item.precio5_anterior }}</td>
                                        <td>${{ item.precio1_actualizado }}</td>
                                        <td>${{ item.precio2_actualizado }}</td>
                                        <td>${{ item.precio3_actualizado }}</td>
                                        <td>${{ item.precio4_actualizado }}</td>
                                        <td>${{ item.precio5_actualizado }}</td>
                                        <td>
                                            {{ item.usuario?.nombre }}<br>
                                            <span class="text-muted">{{ item.usuario?.created_at | date:'yyyy-MM-dd' }}</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </fieldset>
                    </div>
                </div>


            </div>

            <div class="tab-pane fade" id="nav-reclamos" role="tabpanel" aria-labelledby="nav-reclamos-tab">
                <div class="row m-0">
                    <div class="col-12">
                        <fieldset class="border card-fieldset">
                            <div class="row m-0">
 
                                <div class="col-12">
                                    <button class="btn btn-sm btn-success float-right" [disabled]="!produto"
                                        (click)="expandReclamos()">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <table class="table table-striped table-bordered table-k table-hover" >
                                <thead class="sticky-header">
                                    <tr class="text-center">
                                        <th>Fecha</th>
                                        <th>Estado</th>
                                        <th>Obs. Inicial</th>
                                        <th>Obs. Final</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngIf="!produto?.reclamos?.length">
                                        <td class="text-center" colspan="5">
                                            <p class="h6">No hay reclamos registrados</p>
                                        </td>
                                    </tr>
                                    <tr *ngFor="let reclamo of produto?.reclamos">
                                        <td>
                                            {{ reclamo.fecha }}<br>
                                            {{ reclamo.updated_at | date:'yyyy-MM-dd' }}
                                        </td>
                                        <td>{{ reclamo.estado }}</td>
                                        <td class="w-25">
                                            {{ reclamo.observacion_inicial }}
                                        </td>
                                        <td class="w-25">
                                            {{ reclamo.observacion_final }}
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-primary" (click)="expandReclamos(reclamo)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </fieldset>
                    </div>
                </div>

  

            </div>


            <div *ngIf="tipo_bien_visibilidad == 'EXI'" class="tab-pane fade" id="nav-tendencia" role="tabpanel"
                aria-labelledby="nav-tendencia-tab">
 
                <div class="row m-0">
                    <div class="col-12 col-md-4 pt-0 pb-0">
                        <app-cc-input-group-prepend label="Período" styleSpan="input-group-text size-span-campo">
                            <p-calendar (ngModelChange)="periodoSelected($event,periodo)" [readonlyInput]="true"
                            view="year" dateFormat="yy" [(ngModel)]="periodo" [showIcon]="true" #nam="ngModel"
                            name="periodo" class="ui-calendar ui-calendar-button" inputId="icon"
                            [style]="{'height':'30px','display': 'inline-flex'}"
                            [inputStyle]="{'height':'30px', 'border-top-left-radius':'0', 'font-size':'11px','border-bottom-left-radius':'0'}">
                        </p-calendar>

                        </app-cc-input-group-prepend>


                    </div>
                    <div class="col-12 col-md-4 pt-0 pb-0">
                        <app-cc-input-group-prepend label="Mes" styleSpan="input-group-text size-span-campo">
                            <app-cc-select-meses (ChangeMes)="ChangeMesCierrePeriodos($event)" mes_actual={{mes_actual}}
                                style="width: 20%;">
                            </app-cc-select-meses>
                        </app-cc-input-group-prepend>
                    </div>
                    <div class="col-12 col-md-4 pt-0 pb-0">
                        <div class="text-center">
                            <button class="btn btn-primary" (click)="consultarReportGrafi()">
                                Cargar
                            </button>
                        </div>
                    </div>

                </div>
                <div class="mt-5">

                    <div class="row">
                        <div class="col-sm-3"></div>
                        <div class="col-sm-6">
                            <div class="card-body">
                                <!-- <p-chart type="bar" [data]="ReportGrafiFPBarras" [options]="ConfigOpcionCharBarra"></p-chart> -->
                                <canvas id="chart1"></canvas>
                            </div>
                        </div>
                        <div class="col-sm-3"></div>
                    </div>

                    <!--div class="card">
                        <h5>Horizontal</h5>
                        <p-chart type="bar" [data]="basicData" [options]="horizontalOptions"></p-chart>
                    </div>
                    
                    <div class="card">
                        <h5>Multi Axis</h5>
                        <p-chart type="bar" [data]="multiAxisData" [options]="multiAxisOptions"></p-chart>
                    </div>
                    
                    <div class="card">
                        <h5>Stacked</h5>
                        <p-chart type="bar" [data]="stackedData" [options]="stackedOptions"></p-chart>
                    </div-->

                </div>

            </div>
            <div *ngIf="tipo_bien_visibilidad == 'EXI'" class="tab-pane fade" id="nav-stock" role="tabpanel"
                aria-labelledby="nav-stock-tab">
                <div class="row">
                    <div class="col">
                        <h4>Stock</h4>
                    </div>

                </div>
                <div class="row">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-k table-hover" >
                            <thead class="sticky-header">
                                <tr class="text-center">
                                    <th>Nombre Bodega</th>
                                    <th>Ciudad</th>
                                    <th>Cantidad</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngIf="bodegasStock?.length == 0">
                                    <td class="text-center" colspan="3">
                                        <p class="h6">No hay bodegas asociadas</p>
                                    </td>
                                </tr>
                                <tr *ngFor="let b of bodegasStock">
                                    <td>
                                        {{ b.bodega?.nombre }}
                                    </td>
                                    <td>{{ b.bodega?.ciudad }}</td>
                                    <td>{{ b.cantidad }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>

            <div *ngIf="tipo_bien_visibilidad == 'BLD'" class="tab-pane fade" id="nav-depreciacion" 
            role="tabpanel" aria-labelledby="nav-depreciacion-tab">

            <div class="row m-0">
                <div class="col-12">
                    <fieldset class="border card-fieldset">
                        <table class="table table-striped table-bordered table-k table-hover" >
                            <thead class="sticky-header">
                                <tr class="text-center">
                                    <th>#</th>
                                    <th>Fecha</th>
                                    <th class="text-right">Valor Inicial</th>
                                    <th class="text-right">Depreaciacion Mensual</th>
                                    <th class="text-right">Valor Final</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngIf="!produto?.depreciacion_detalle?.length">
                                    <td class="text-center" colspan="6">
                                        <p class="h6">No hay tabla de amortización registrada</p>
                                    </td>
                                </tr>
                                <tr *ngFor="let d of produto?.depreciacion_detalle; let i = index">
                                    <td>{{ i + 1 }}</td>
                                    <td>{{ d?.fecha_depreciacion | date:'yyyy-MM-dd' }}</td>
                                    <td class="text-right">${{ d?.valor_inicial | number:'1.2-2' }}</td>
                                    <td class="text-right">${{ d?.depreciacion_mensual | number:'1.2-2' }}</td>
                                    <td class="text-right">${{ d?.valor_final | number:'1.2-2' }}</td>
                                    <td>{{ d?.estado }}</td>
                                </tr>
                            </tbody>
                            
                            
                        </table>
                    </fieldset>
                </div>


                

            </div>
        </div>
        </div>


          

        <!-- <fieldset class="border p-2 mt-3 mb-3">
    <legend class="w-auto h6">Informacion Importación</legend>
    <div class="row" *ngIf="permisions?.length > 0">
        <div class="col-sm-3">
            <app-cc-input-group-prepend label="UDM Peso" styleSpan="size-span-campo">
                <select id="inpMasa" class="form-control form-control-sm" [(ngModel)]="values.fk_unidad_masa" [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima">
            <option hidden disabled selected [value]=" 0">Elegir una opción</option>
            <option *ngFor="let el of masa; let i = index" [value]="el.udm_ini">
                {{ el.udm_ini }}
            </option>
            </select>
            </app-cc-input-group-prepend>
        </div>
        <div class="col-sm-2">
            <app-cc-input-group-prepend>
                <input type="number" min="0" class="form-control form-control-sm text-right" [(ngModel)]="values.masa" (keypress)="commonServices.FormatDecimalVal($event)" [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima">
            </app-cc-input-group-prepend>
        </div>
        <div class="col-sm-4">
            <div class="input-group input-group-sm mt-1">
                <div class="input-group-prepend">
                    <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Tarifas Arancelarias</span>
                </div>
                <button class="btn btn-sm btn-info" (click)="presentarAranceles()" [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima">
                    <i class="fas fa-balance-scale"></i>
                </button>
                <div class="input-group-append">
                    <input type="text" class="form-control form-control-sm" [(ngModel)]="values.code" [disabled]="true">
                </div>
                <input type="text" class="form-control form-control-sm" [(ngModel)]="'%' + values.porcentaje " [disabled]="true">
            </div>
        </div>
        <div class="col-sm-3">
            <app-cc-input-group-prepend>
                <textarea class="form-control form-control-sm cls-textarea" [(ngModel)]="values.nombre" [disabled]="true"></textarea>
            </app-cc-input-group-prepend>
        </div>
    </div>
    <div class="row" *ngIf="permisions?.length > 0">
        <div class="col-sm-3">
            <app-cc-input-group-prepend label="UDM Volumen" styleSpan="size-span-campo">
                <select id="inpLong" class="form-control form-control-sm" [(ngModel)]="values.fk_unidad_longitud" [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima">
            <option hidden disabled selected [value]="0">Elegir una opción</option>
            <option *ngFor="let el of long; let i = index" [value]="el.udm_ini">
                {{ el.udm_ini }}
            </option>
            </select>
            </app-cc-input-group-prepend>
        </div>
        <div class="col-sm-2">
            <app-cc-input-group-prepend label="altura" styleSpan="size-span-campo">
                <input type="number" min="0" class="form-control form-control-sm text-right" (keypress)="commonServices.FormatDecimalVal($event)" [(ngModel)]="values.longitud_1" [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima">
            </app-cc-input-group-prepend>
        </div>
        <div class="col-sm-2">
            <app-cc-input-group-prepend label="largo" styleSpan="size-span-campo">
                <input type="number" min="0" class="form-control form-control-sm text-right" (keypress)="commonServices.FormatDecimalVal($event)" [(ngModel)]="values.longitud_2" [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima">
            </app-cc-input-group-prepend>
        </div>
        <div class="col-sm-2">
            <app-cc-input-group-prepend label="ancho" styleSpan="size-span-campo">
                <input type="number" min="0" class="form-control form-control-sm text-right" [(ngModel)]="values.longitud_3" [disabled]="permisions[0].agregar == '0' || !disabledProduct || disabledMateriaPrima">
            </app-cc-input-group-prepend>
        </div>
    </div>
</fieldset> -->


        <!-- <app-tabs-ingreso *ngIf="permisions?.length > 0">
</app-tabs-ingreso> -->
    </app-button-radio-active-new>
</div>

<cc-spiner-procesar [ltexto]="mensajeSppiner" lfulScren=true></cc-spiner-procesar>
<!--Modal-->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" *ngIf="permisions?.length > 0">
        <div class="modal-content">
            <div class="modal-body mt-1">
                <app-button-radio-active-new titulo="{{newCatalogo}}" filtroBoton="btnIProductoModal"
                    cstyle="bg-gradient-primary text-white" [groupButton]="vmButtons"
                    (onMetodoGlobal)="metodoGlobal($event)" icono="fab fa-product-hunt">
                    <div class="row mb-4 mt-1">
                        <div class="col-sm-12 " *ngIf="tipoCatalogo == 'MODELOS' ">
                            <app-cc-input-group-prepend label="Marca" styleSpan="size-span-campo">
                                <ng-select [(ngModel)]="marcaSelectNew" [searchable]="true"
                                    class="form-control form-control-sm custom-select custom" appendTo="body"
                                    [clearable]="true" id="IdproductSendNg">
                                    <ng-option *ngFor="let d of dataMarcas" [value]="d.valor">{{d.valor}}
                                    </ng-option>
                                </ng-select>
                            </app-cc-input-group-prepend>
                        </div>

                        <div class="col-sm-12 mt-1">
                            <app-cc-input-group-prepend label="{{valueLabel}}" styleSpan="size-span-campo">
                                <input type="text" #valueCata="ngModel" name="valueCata"
                                    style="box-shadow: unset;outline: unset;" class="form-control form-control-sm"
                                    [(ngModel)]="valorCatalogo" placeholder="Ingrese valor"
                                    [disabled]="permisions[0].editar == '0' " id="IdValorCatalogo">
                            </app-cc-input-group-prepend>
                        </div>
                        <!-- <div class="col-sm-12 mt-1">
                            <app-cc-input-group-prepend label="Descripción" styleSpan="size-span-campo">
                                <textarea name="descripcion" cols="40" rows="1" #causa="ngModel" name="causa"
                                    class="form-control form-control-sm" [(ngModel)]="description"
                                    placeholder="Ingrese Descripción" style="box-shadow: unset;outline: unset;"
                                    [disabled]="permisions[0].editar == '0' " id="Idcausa">
                            </textarea>
                            </app-cc-input-group-prepend>
                        </div> -->
                    </div>
                </app-button-radio-active-new>
            </div>
        </div>
    </div>
</div>

<!--Modal QR-->
<div class="modal fade" id="exampleModalQr" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <app-button-radio-active-new titulo="Código QR" filtroBoton="btnIQrModal"
                    cstyle="bg-gradient-primary text-white" [groupButton]="vmButtons"
                    (onMetodoGlobal)="metodoGlobal($event)" icono="far fa-eye">
                    <div class="row justify-content-center">
                        <div class="col-md-7 justify-content-center" *ngIf="codigoData !== undefined">
                            <div class="qr-container">
                                <qrcode [qrdata]="codigoData" [size]="120" [level]="'M'"></qrcode>
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-center mb-2">
                        <div class="col text-center">
                            <span>{{codigoData}}</span>
                        </div>
                    </div>
                </app-button-radio-active-new>
            </div>
        </div>
    </div>
</div>

<!--Modal Aranceles-->
<div class="modal fade" id="ArancelesModal" tabindex="-1" role="dialog" aria-labelledby="ArancelesModalLabel"
    aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg " role="document">
        <div class="modal-content" *ngIf="aranceles">
            <div class="modal-body">
                <app-button-radio-active-new titulo="TARIFAS ARANCELARIAS" filtroBoton="btnarancelModal"
                    cstyle="bg-gradient-primary text-white" [groupButton]="vmButtons"
                    (onMetodoGlobal)="metodoGlobal($event)" icono="fas fa-balance-scale">
                    <div class="row justify-content-center">
                        <div class="col-md-12 mt-2">
                            <div class="table-responsive">
                                <table class="table table-bordered no-footer table-hover" datatable
                                    [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
                                    <thead>
                                        <tr class="text-center" style="width: 100%;">
                                            <th style="width: 10%;">#</th>
                                            <th style="width: 10%;"> Código</th>
                                            <th style="width: 60%;">Nombre</th>
                                            <th style="width: 10%;">UF</th>
                                            <th style="width: 10%;">Tarifa</th>
                                        </tr>
                                    </thead>
                                    <tbody *ngIf="aranceles">
                                        <tr class="text-center" *ngFor="let el of aranceles; let i = index"
                                            (click)="getArancelEvent(i)" style="cursor: pointer !important;">
                                            <td>{{ i + 1 }}</td>
                                            <td class="text-left">{{ el.codigo }}</td>
                                            <td class="text-left">{{ el.nombre }}</td>
                                            <td>{{ el.unidades_fisicas }}</td>
                                            <td>{{ el.tarifa_arancelaria }} %</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </app-button-radio-active-new>
            </div>
            <!--   <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="closeModal()">Cancelar</button>
            </div> -->
        </div>
    </div>
</div>