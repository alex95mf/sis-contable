<div class="row" *ngIf="permisions?.length > 0 ">
    <div class="col-12  p-2" *ngIf="guardaPtoEmsion" style="background: rgba(255, 255, 255, 0.781);">
        <div class="row">
            <div class="col-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Empresa</span>
                    </div>
                    <select class="form-control form-control-sm custom-select" [(ngModel)]="ptoemision.empresa"
                        [disabled]="!actions.dComponet || disabledUpdated" id="ptoemisionEmpresa"
                        (ngModelChange)="getFilterEmpresa($event)">
                        <option [value]="0">Seleccione empresa</option>
                        <option *ngFor="let d of arrayEmpresa" [value]="d.id_empresa">{{d.nombre_comercial}}</option>
                    </select>
                </div>
            </div>
            <div class="col-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Sucursal</span>
                    </div>
                    <select class="form-control form-control-sm custom-select" [(ngModel)]="ptoemision.sucursal"
                        id="ptoemisionSucursal" [disabled]="ptoemision.empresa == 0 || disabledUpdated "
                        (ngModelChange)="getFilterptoEmision($event)">
                        <option [value]="0">Seleccione sucursal</option>
                        <option *ngFor="let d of arraySucursal" [value]="d.id_sucursal">{{d.nombre}}</option>
                    </select>
                </div>
            </div>
            <div class="col-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Tipo de
                            Documento</span>
                    </div>
                    <select class="form-control form-control-sm custom-select" [(ngModel)]="ptoemision.tipoDoc"
                        id="ptoemisionDocumento" [disabled]="!actions.dComponet || disabledUpdated "
                        (ngModelChange)="getFilterDocumento($event)">
                        <option [value]="0">Seleccione tipo documento</option>
                        <option *ngFor="let d of arrayDocumento" [value]="d.id">{{d.nombre}}</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No. Autorización</span>
                    </div>
                    <input placeholder="Número autorización" type="text" minlength="10" maxlength="11"
                        class="form-control form-control-sm" id="ptoemisionNumFac" [(ngModel)]="ptoemision.numAut"
                        [disabled]="!actions.dComponet">

                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Nombre</span>
                    </div>
                    <input placeholder="Ingrese Nombre de Punto de Emisión" type="text"
                        class="form-control form-control-sm" id="idptoemisionNombre" [(ngModel)]="ptoemision.nombre"
                        [disabled]="!actions.dComponet">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Número Aviso
                            Previo</span>
                    </div>
                    <input type="text" (keypress)="commonServices.FormatDecimalVal($event)" minlength="10"
                        maxlength="10" class="form-control form-control-sm" [(ngModel)]="parameters.numeroAviso"
                        id="idnumeroAviso" [disabled]="!sueldData">
                    <div class="input-group-append" style="width: 30px;padding-left: 9px!important;padding-top: 6px;
                        background-color: #009688;text-align: center !important;border-radius: 0px 5px 5px 0px;">
                        <input type="checkbox" style="text-align: center;" title="" [(ngModel)]="parameters.checkaviso"
                            (ngModelChange)="setsueldoUni()" id="checksueldouni"
                            [disabled]="permisions[0].editar == '0'|| !actions.dComponet">
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No. Factura
                            Inicio</span>
                    </div>
                    <input placeholder="Ingrese Número de Facura" type="text"
                        (keypress)="commonServices.FormatDecimalVal($event)" minlength="9" maxlength="9"
                        class="form-control form-control-sm" id="idptoemisionnumFacInicio"
                        [(ngModel)]="ptoemision.numFacInicio" [disabled]="!actions.dComponet">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No. Factura
                            Caducidad</span>
                    </div>
                    <input placeholder="Ingrese número factura de caducidad" type="text"
                        (keypress)="commonServices.FormatDecimalVal($event)" minlength="9" maxlength="9"
                        class="form-control form-control-sm" id="idptonumFacCaducidad"
                        [(ngModel)]="ptoemision.numFacCaducidad" [disabled]="!actions.dComponet">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Caja por Defecto</span>
                    </div>
                    <input type="checkbox" title="" [(ngModel)]="parameters.checkCajaDefault"
                        class="form-control form-control-sm" id="idCajaDefault" [disabled]="!actions.dComponet"
                        (ngModelChange)="existCajaDefecto()" style="height: 17px;margin-top: 5px;">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No.
                            Establecimiento</span>
                    </div>
                    <input placeholder="Ingreso número de establecimiento" type="text" minlength="3" maxlength="3"
                        (keypress)="commonServices.FormatDecimalVal($event)" class="form-control form-control-sm"
                        id="idptonumFacEstablecimiento" [(ngModel)]="ptoemision.numFacEstablecimiento"
                        [disabled]="!actions.dComponet || disabledUpdated">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No. Punto de
                            Emisión</span>
                    </div>
                    <input placeholder="Ingreso número de punto de emisión" type="text" minlength="3" maxlength="3"
                        (keyup)="ValidacionPto($event)" (keypress)="commonServices.FormatDecimalVal($event)"
                        class="form-control form-control-sm" id="idptonumPuntoEmision"
                        [(ngModel)]="ptoemision.numPuntoEmision" [disabled]="!actions.dComponet   || disabledUpdated">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No. Factura
                            Serial</span>
                    </div>
                    <input placeholder="Ingrese número serial de la factura" type="text" minlength="10" maxlength="10"
                        (keypress)="commonServices.FormatDecimalVal($event)" class="form-control form-control-sm"
                        id="idptonumFacSerial" [(ngModel)]="ptoemision.numFacSerial" [disabled]="!actions.dComponet">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <app-cc-input-group-prepend label="Fecha Autorización" styleSpan="size-span-campo">
                    <ejs-datepicker [(ngModel)]="fechaAutorizacion" class="form-control" name="dateFrom"
                        format='yyyy-MM-dd' [disabled]="!actions.dComponet">
                    </ejs-datepicker>
                </app-cc-input-group-prepend>
            </div>
            <div class="col-sm-6">
                <app-cc-input-group-prepend label="Fecha Caducidad" styleSpan="size-span-campo">
                    <ejs-datepicker [(ngModel)]="fechaCaducidad" class="form-control" name="dateFrom"
                        format='yyyy-MM-dd' [disabled]="!actions.dComponet">
                    </ejs-datepicker>
                </app-cc-input-group-prepend>
            </div>
        </div>
    </div>
    <div class="col-12  p-2" *ngIf="guardarDocumento" style="background: rgba(255, 255, 255, 0.781);">
        <div class="row">
            <div class="col-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Empresa</span>
                    </div>
                    <select class="form-control form-control-sm custom-select" [(ngModel)]="ptoemision.empresa"
                        [disabled]="!actions.dComponet" id="ptoemisionEmpresa"
                        (ngModelChange)="getFilterEmpresa($event)">
                        <option *ngFor="let d of arrayEmpresa" [value]="d.id_empresa">
                            {{d.nombre_comercial}}</option>
                    </select>
                </div>
            </div>
            <div class="col-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Sucursal</span>
                    </div>
                    <select class="form-control form-control-sm custom-select" [(ngModel)]="ptoemision.sucursal"
                        id="ptoemisionSucursal" [disabled]="ptoemision.empresa == 0 "
                        (ngModelChange)="getFiltersucursalExistente($event)">
                        <option></option>
                        <option *ngFor="let d of arraySucursal" [value]="d.id_sucursal">{{d.nombre}}
                        </option>
                    </select>
                </div>
            </div>
            <div class="col-4" *ngIf="guardarDocumento">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Tipo de
                            Documento</span>
                    </div>
                    <select class="form-control form-control-sm custom-select" [(ngModel)]="ptoemision.tipoDoc"
                        id="ptoemisionDocumento" [disabled]=" ptoemision.ptoExistente == undefined"
                        (ngModelChange)="getFilterDocumento($event)">
                        <option *ngFor="let d of arrayDocumento" [value]="d.id">{{d.nombre}}
                        </option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No. Autorización</span>
                    </div>
                    <input placeholder="numero autorización" type="text" minlength="10" maxlength="11"
                        class="form-control form-control-sm" id="ptoemisionNumFac" [(ngModel)]="ptoemision.numAut"
                        [disabled]=" ptoemision.ptoExistente == undefined">
                </div>
            </div>
            <div class="col-sm-4" *ngIf="guardarDocumento">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Nombre</span>
                    </div>
                    <input placeholder="Ingrese Nombre de Punto de Emisión" type="text"
                        class="form-control form-control-sm" id="idptoemisionNombre" [(ngModel)]="ptoemision.nombre"
                        [disabled]="  actions.ptoEmisionFl">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Número Aviso
                            Previo</span>
                    </div>
                    <input type="text" (keypress)="commonServices.FormatDecimalVal($event)" minlength="10"
                        maxlength="10" class="form-control form-control-sm" [(ngModel)]="parameters.numeroAviso"
                        id="idnumeroAviso" [disabled]="!sueldData">
                    <div class="input-group-append" style="width: 30px;padding-left: 9px!important;padding-top: 6px;
                        background-color: #009688;text-align: center !important;border-radius: 0px 5px 5px 0px;">
                        <input type="checkbox" title="" [(ngModel)]="parameters.checkaviso"
                            (ngModelChange)="setsueldoUni()" id="checksueldouni"
                            [disabled]=" ptoemision.ptoExistente == undefined">
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No. Factura
                            Inicio</span>
                    </div>
                    <input placeholder="Ingrese Número de Facura" type="text"
                        (keypress)="commonServices.FormatDecimalVal($event)" minlength="9" maxlength="9"
                        class="form-control form-control-sm" id="idptoemisionnumFacInicio"
                        [(ngModel)]="ptoemision.numFacInicio" [disabled]=" ptoemision.ptoExistente == undefined">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No. Factura
                            Caducidad</span>
                    </div>
                    <input placeholder="Ingrese número factura de caducidad" type="text"
                        (keypress)="commonServices.FormatDecimalVal($event)" minlength="9" maxlength="9"
                        class="form-control form-control-sm" id="idptonumFacCaducidad"
                        [(ngModel)]="ptoemision.numFacCaducidad" [disabled]=" ptoemision.ptoExistente == undefined">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Caja por Defecto</span>
                    </div>
                    <input type="checkbox" class="form-control form-control-sm"
                        [(ngModel)]="parameters.checkCajaDefault" id="idCajaDefault"
                        [disabled]="permisions[0].editar == '0'  ||  actions.ptoEmisionFl"
                        (ngModelChange)="existCajaDefecto()">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No.
                            Establecimiento</span>
                    </div>
                    <input placeholder="Ingreso número de establecimiento" type="text" minlength="3" maxlength="3"
                        (keypress)="commonServices.FormatDecimalVal($event)" class="form-control form-control-sm"
                        id="idptonumFacEstablecimiento" [(ngModel)]="ptoemision.numFacEstablecimiento"
                        [disabled]="permisions[0].editar == '0'  ||   actions.ptoEmisionFl">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No. Punto de
                            Emisión</span>
                    </div>
                    <input placeholder="Ingreso número de punto de emisión" type="text" minlength="3" maxlength="3"
                        (keyup)="ValidacionPto($event)" (keypress)="commonServices.FormatDecimalVal($event)"
                        class="form-control form-control-sm" id="idptonumPuntoEmision"
                        [(ngModel)]="ptoemision.numPuntoEmision"
                        [disabled]="permisions[0].editar == '0'  ||   actions.ptoEmisionFl ">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">No. Factura
                            Serial</span>
                    </div>
                    <input placeholder="Ingrese número serial de la factura" type="text" minlength="10" maxlength="10"
                        (keypress)="commonServices.FormatDecimalVal($event)" class="form-control form-control-sm"
                        id="idptonumFacSerial" [(ngModel)]="ptoemision.numFacSerial"
                        [disabled]=" ptoemision.ptoExistente == undefined">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <div class="input-group input-group-sm mt-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text size-span-campo" id="inputGroup-sizing-sm">Punto Existente</span>
                    </div>
                    <select class="form-control form-control-sm custom-select" [(ngModel)]="ptoemision.ptoExistente"
                        id="ptoemisionExistente" [disabled]=" ptoemision.sucursal == undefined"
                        (ngModelChange)="filterExistente($event)">
                        <option></option>
                        <option *ngFor="let d of puntoExistente" [value]="d.pto_nombre">
                            {{d.pto_nombre}}</option>
                    </select>
                </div>
            </div>
            <div class="col-sm-4">
                <app-cc-input-group-prepend label="Fecha Autorización" styleSpan="size-span-campo">
                    <ejs-datepicker [(ngModel)]="fechaAutorizacion" class="form-control" name="dateFrom"
                        format='yyyy-MM-dd' [disabled]="!actions.dComponet"
                        [disabled]=" ptoemision.ptoExistente == undefined">
                    </ejs-datepicker>
                </app-cc-input-group-prepend>
            </div>
            <div class="col-sm-">
                <app-cc-input-group-prepend label="Fecha Caducidad" styleSpan="size-span-campo">
                    <ejs-datepicker [(ngModel)]="fechaCaducidad" class="form-control" name="dateFrom"
                        format='yyyy-MM-dd' [disabled]="!actions.dComponet"
                        [disabled]=" ptoemision.ptoExistente == undefined">
                    </ejs-datepicker>
                </app-cc-input-group-prepend>
            </div>
        </div>
    </div>
</div>

<div class="row mt-2 " *ngIf="permisions?.length > 0 ">
    <div class="col-12 p-2  filters">
        <div class="table-responsive responsive-table">
            <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table no-footer table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th style="text-align: center;">Id</th>
                        <th>Empresa</th>
                        <th>Sucursal</th>
                        <th>Documento</th>
                        <th>Nombre Punto</th>
                        <th>No. Establecimiento</th>
                        <th>No. Punto Emisión</th>
                        <!-- <th>Caja por Defecto</th> -->
                    </tr>
                </thead>
                <tbody *ngIf="validaDtUser">
                    <tr *ngFor="let dt of guardaT" (click)="updatePtoEmision(dt)"
                        style="cursor:pointer;text-align:center;">
                        <td style="text-align:center;padding-left: 20px;width: 4%;">{{dt.id}}</td>
                        <td style="text-align:start;padding-left: 20px;width: 8%;">{{dt.nombre_comercial}}
                        </td>
                        <td style="text-align:start;padding-left: 20px;width: 8%;">{{dt.nombre_sucursal}}
                        </td>
                        <td style="text-align:start;padding-left: 20px;width: 7%;">{{dt.doc_tipo}}</td>
                        <td style="text-align:start;padding-left: 20px;width: 10%;">{{dt.pto_nombre}}</td>
                        <td style="text-align:start;padding-left: 20px;width: 7%;">{{dt.num_establecimiento
                            |
                            number:'3.0' }}</td>
                        <td style="text-align:start;padding-left: 20px;width: 7%;">{{dt.num_punto_emision |
                            number:'3.0'}}</td>
                        <!-- <td *ngIf="dt.hasDefault == 1" style="width: 7%;">Si</td>
                        <td *ngIf="dt.hasDefault == 0 " style="width: 7%;">No</td> -->
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<cc-spiner-procesar [ltexto]="mensajeSppiner" lfulScren=false lTipo="spPtemision"></cc-spiner-procesar>


<!-- <section style="background-color:transparent;border: none; border-color: transparent;">
    <div class="row justify-content-center" *ngIf="permisions?.length > 0 ">
            <button class="btn btn-warning boton" *ngIf="!nuevoPtoEmsion" [disabled]="actions.btnNuevo"
                (click)="newPtoEmision()" ngbTooltip="Realizar nuevo Pto Emisión" style="width:212px;width-size:8px;">
                <i class="fa fa-plus-square-o" aria-hidden="true"></i> NUEVO PUNTO EMISION
            </button>
            <button class="btn btn-primary boton" *ngIf="guardaPtoEmsion " [disabled]="!actions.btnGuardar"
                placement="top" ngbTooltip="Guardar Punto Emisión" (click)="validaSaveparameter()">
                <i class="fa fa-floppy-o" aria-hidden="true"></i> GUARDAR
            </button>
            <button class="btn btn-success boton" *ngIf="!nuevoPtoDocumento " [disabled]="actions.btnNuevo"
                (click)="newPtoDocumento()" style="width:212px;width-size:8px;" ngbTooltip="Realizar nuevo Documento">
                <i class="fa fa-plus-square-o" aria-hidden="true"></i> NUEVO DOCUMENTO
            </button>

            <button class="btn btn-primary boton" *ngIf="guardarDocumento" [disabled]="!actions.btnGuardar"
                placement="top" style="width:212px;width-size:8px;" (click)="validaSaveDocumento()"
                ngbTooltip="Guardar Punto Emisión">
                <i class="fa fa-floppy-o" aria-hidden="true"></i> GUARDAR DOCUMENTO
            </button>
            <button class="btn boton" [disabled]="!actions.btnmodificar" style="background-color:#821DD5;color:white;"
                ngbTooltip="Modificar Rol Pago" (click)="validaeditModificarPto()"><i class="fa fa-pencil-square-o"
                    aria-hidden="true"></i>MODIFICAR</button>

            <button class="btn boton" style="color:white; background:#8b3838;" [disabled]="!actions.btneliminar"
                placement="top" ngbTooltip="Eliminar Rol de Paso" (click)="validateDelete()">
                <i class="fa fa-trash-o " style="color:white;font-size: 19px;" aria-hidden="true"></i> ELIMINAR
            </button>
            <button class="btn btn-danger boton" [disabled]="!actions.btncancelar" (click)="cleanptoemision()"
                ngbTooltip="Cancelar Proceso">
                <i class="fa fa-times" aria-hidden="true"></i> CANCELAR
            </button>
    </div>
</section> -->