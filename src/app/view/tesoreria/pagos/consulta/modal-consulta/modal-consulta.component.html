<app-button-radio-active [titulo]="'Consulta de Orden de Pago'" filtroBoton="btnGestionModalGestion" cstyle="bg-gradient-primary text-white" [groupButton]="vmButtons" (onMetodoGlobal)="metodoGlobal($event)" [icono]="isNew ? 'far fa-plus-square' : 'far fa-edit'">
    <fieldset class="border pb-2 px-2">
        <legend class="w-auto ml-1 bg-dark">Información de la Orden de Pago</legend>
        <!--div class="row">
            <div class="col-6">
                <div class="input-group input-group-sm mt-2 ">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo" style="width: 155px;">Proveedor</span></div>
                        <input type="text" class="form-control form-control-sm" readonly [(ngModel)]="ordenesEdit.proveedor.razon_social">
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="input-group input-group-sm mt-2 ">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo">Nro</span></div>
                        <input type="text" class="form-control form-control-sm" readonly value=" {{ ordenesEdit.documento}}">
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-3">
                <div class="input-group input-group-sm mt-2 ">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo">Fecha</span></div>
                        <input type="text" class="form-control form-control-sm" readonly value=" {{ ordenesEdit.fecha | date:'dd/MM/yyyy'}}">
                    </div>
                </div>
            </div>

            <div class="col-3">
                <div class="input-group input-group-sm mt-2 ">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo">Total</span></div>
                        <input type="text" class="form-control form-control-sm text-right" readonly value="$ {{ ordenesEdit.total }}">
                    </div>
                </div>
            </div>

            <div class="col-6">
                <div class="input-group input-group-sm mt-2 ">
                    <div class="input-group input-group-sm mt-1">
                        <div class="input-group-prepend">
                            <span class="input-group-text font-weight-bold size-span-campo" id="inputGroup-sizing-sm">Observación</span>
                        </div>
                        <textarea  id="observacion" type="text" class="form-control form-control-sm" placeholder="Observación" readonly value=" {{ ordenesEdit.observacion}}"></textarea>
                    </div>
                </div>
            </div>
        </div-->
        <div class="row mt-2 mb-3">
            <div class="col-8">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span class="input-group-text font-weight-bold" style="width: 155px;">Proveedor</span></div>
                    <input type="text" class="form-control form-control-sm" readonly [(ngModel)]="ordenesEdit.proveedor.razon_social">
                </div>
            </div>
            <div class="col-4">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span class="input-group-text font-weight-bold" style="width: 120px;">Estado</span></div>
                    <div class="form-control form-control-sm" style="background-color: #E4E6EA;">
                        <i
                            placement="bottom"
                            [ngbTooltip]="(ordenesEdit.estado == 'P') ? 'Pendiente' : (ordenesEdit.estado == 'E') ? 'Emitido' : ((ordenesEdit.estado == 'A') ? 'Aprobado' : 'Anulado')"
                            [class]="(ordenesEdit.estado == 'P') ? 'fas fa-circle text-muted' : (ordenesEdit.estado == 'E') ? 'fas fa-circle text-warning' : ((ordenesEdit.estado == 'A') ? 'fas fa-circle text-success' : 'fas fa-circle text-danger')">
                        </i>
                        {{ (ordenesEdit.estado == 'C') ? 'Pagado' : (ordenesEdit.estado == 'E') ? 'Emitido' : ((ordenesEdit.estado == 'A') ? 'Aprobado' : 'Negado') }}
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-2 mb-3">
            <div class="col-4">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span class="input-group-text font-weight-bold" style="width: 155px;">No. Documento</span></div>
                    <input type="text" class="form-control form-control-sm" readonly [(ngModel)]="ordenesEdit.documento">
                </div>
            </div>
            <!-- col-1.425 -->
            <div class="col-4">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span  class="input-group-text font-weight-bold">No.</span></div>
                    <input type="text" class="form-control form-control-sm" readonly [(ngModel)]="ordenesEdit.id_documento">
                </div>
            </div>
            <div class="col-4">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo">Fecha</span></div>
                    <input disabled type="date" class="form-control form-control-sm" [(ngModel)]="gestOrden.fecha">
                </div>
            </div>
        </div>
        <div class="row mt-2 mb-3">
            <div class="col-4">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo">No. Proceso</span></div>
                    <input type="text" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.nro_proceso" maxlength="20" placeholder="No. Proceso">
                </div>
            </div>
            <!-- col-1.425 -->
            <div class="col-4">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span  class="input-group-text font-weight-bold size-span-campo">Nombre Proceso</span></div>
                    <input type="text" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.nombre_proceso" maxlength="200" placeholder="Nombre Proceso">
                </div>
            </div>
            <!-- col-2.675 -->
            <div class="col-4">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span  class="input-group-text font-weight-bold size-span-campo">Monto Proceso</span></div>
                    <input type="text" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.monto_proceso" maxlength="17" placeholder="Monto Proceso" (keypress)="validaciones.numberOnlyDot($event)">
                </div>
            </div>
        </div>
        <div class="row mt-2 mb-3">
            <div class="col-4">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo" style="width: 155px;">No. P&oacute;liza</span></div>
                    <input type="text" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.nro_poliza" maxlength="20" placeholder="No. P&oacute;liza">
                </div>
            </div>
            <div class="col-4">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span  class="input-group-text font-weight-bold size-span-campo">Vigencia P&oacute;liza</span></div>
                    <input  type="date" class="form-control form-control-sm"  [(ngModel)]="gestOrden.vigencia_poliza" placeholder="Vigencia P&oacute;liza">
                </div>
            </div>
            <div class="col-4">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend">
                        <span class="input-group-text font-weight-bold size-span-campo" id="inputGroup-sizing-sm">Tipo Desembolso</span>
                    </div>
                    <ng-select id="estado" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.tipo_desembolso" maxlength="5">
                        <ng-option disabled [value]="0">Seleccione un tipo</ng-option>
                        <ng-option *ngFor="let op of tipoDesembolso" [value]="op.valor">
                        {{ op.descripcion }}</ng-option>
                    </ng-select>
                </div>
            </div>
        </div>
        <!-- <div class="row mt-2 mb-3">
            <div class="col-8">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend"><span class="input-group-text font-weight-bold text-white" style="width: 155px; background-color: #404A62;">Observaciones</span></div>
                    <textarea cols="30" rows="3" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.observacion" placeholder="Observaciones"></textarea>
                </div>
            </div>
        </div> -->
        </fieldset>
        <fieldset class="border pb-2 px-2" *ngIf="ordenesEdit.estado!='E'">
            <legend class="w-auto ml-1 bg-dark">Gesti&oacute;n de la Orden de Pago</legend>
                <div class="row">
                    <div class="col-4">
                        <div class="input-group input-group-sm mt-2 ">
                            <div class="input-group-prepend">
                                <span style="width:140px;" class="input-group-text font-weight-bold size-span-campo" id="inputGroup-sizing-sm">Estado</span>
                            </div>
                            <ng-select id="estado" class="form-control form-control-sm" [disabled]="deshabilitar" [(ngModel)]="gestOrden.estado" maxlength="5">
                                <ng-option disabled [value]="0">Seleccione un Estado</ng-option>
                                <ng-option *ngFor="let op of estadoList" [value]="op.value">
                                <i
                                    placement="bottom"
                                    [ngbTooltip]="(gestOrden.estado == 'P' || op.value == 'P') ? 'Pendiente' : (gestOrden.estado == 'E' || op.value == 'E') ? 'Emitido' : ((gestOrden.estado == 'A' || op.value == 'A') ? 'Aprobado' : 'Negado')"
                                    [class]="(gestOrden.estado == 'P' || op.value == 'P') ? 'fas fa-circle text-muted' : (gestOrden.estado == 'E' || op.value == 'E') ? 'fas fa-circle text-warning' : ((gestOrden.estado == 'A' || op.value == 'A') ? 'fas fa-circle text-success' : 'fas fa-circle text-danger')">
                                </i>
                                {{ op.label }}</ng-option>
                            </ng-select>
                        </div>
                    </div>
                    <div *ngIf="deshabilitar" class="col-4">
                        <div class="input-group input-group-sm mt-2 ">
                            <div class="input-group input-group-sm">
                                <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo">Usuario de Gestión</span></div>
                                <input type="text" class="form-control form-control-sm" [disabled]="deshabilitar" value=" {{ gestOrden.usuarioGestion | titlecase }}">
                            </div>
                        </div>
                    </div>
                    <div *ngIf="deshabilitar" class="col-4">
                        <div class="input-group input-group-sm mt-2 ">
                            <div class="input-group input-group-sm">
                                <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo">Fecha Gestíon</span></div>
                                <input type="text" class="form-control form-control-sm" [disabled]="deshabilitar" value=" {{ gestOrden.fecha_gestion | date:'dd/MM/yyyy'}}">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-8">
                        <div class="input-group input-group-sm mt-1">
                            <div class="input-group-prepend">
                                <span class="input-group-text font-weight-bold size-span-campo" id="inputGroup-sizing-sm">Observación</span>
                            </div>
                            <textarea  id="observacion" type="text" class="form-control form-control-sm" [disabled]="deshabilitar" placeholder="Observación" [(ngModel)]="gestOrden.observacion_gestion" maxlength="300"></textarea>
                        </div>
                    </div>
                </div>
        </fieldset>
        <fieldset class="border pb-2 px-2" *ngIf="ordenesEdit.estado==='E'">
            <legend class="w-auto ml-1 bg-dark">Gesti&oacute;n de la Orden de Pago</legend>
                <div class="row">
                    <div class="col">
                        <span class="text-center"><h5>Aún no ha sido gestionado</h5></span>
                    </div>

                </div>
        </fieldset>
</app-button-radio-active>

<cc-spiner-procesar [ltexto]="mensajeSpinner" lfulScren=true lTipo="ticket-form"></cc-spiner-procesar>

<div id="PrintSectionModal" [hidden]="true">
    <div class="row justify-content-center prt-comprobante">

        <div class="col-11 pl-2 pr-2 ">
            <div class="row justify-content-center">
                <div class="col-md-5 text-center mt-5">
                    <div class="sect-one pt-3 pb-3">
                        <div class="row justify-content-center">
                            <div class="col-md-12 mt-4">
                                <img src="{{empresLogo}}" alt="" style="width: 200px;">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-7 text-center mt-5">
                    <div class="sect-two pt-3 pb-2">
                        <div class="row justify-content-center">
                            <div class="col-md-12 mt-4" style="font-size: 20px;font-weight: bold">
                                <h3>Documento: {{ ordenesEdit.documento }}</h3>
                                <h3>Fecha: {{ ordenesEdit.fecha | date: 'dd/MM/yyyy' }}</h3>
                                <h3>Estado: {{ (ordenesEdit.estado == 'E') ? 'Emitido' : ordenesEdit.estado == 'A' ? 'Aprobado' : ordenesEdit.estado == 'C' ? 'Pagado' : 'Negado' }}</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row justify-content-center prt-comprobante">
        <div class="col-11 pl-2 pr-2">
            <div class="row mt-2 mb-3">
                <div class="col-8">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold" style="width: 155px;">Proveedor</span></div>
                        <input type="text" class="form-control form-control-sm" readonly [(ngModel)]="ordenesEdit.proveedor.razon_social">
                    </div>
                </div>
                <div class="col-4">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold" style="width: 120px;">Estado</span></div>
                        <div class="form-control form-control-sm" style="background-color: #E4E6EA;">
                            <i
                                placement="bottom"
                                [ngbTooltip]="(ordenesEdit.estado == 'P') ? 'Pendiente' : (ordenesEdit.estado == 'E') ? 'Emitido' : ((ordenesEdit.estado == 'A') ? 'Aprobado' : 'Anulado')"
                                [class]="(ordenesEdit.estado == 'P') ? 'fas fa-circle text-muted' : (ordenesEdit.estado == 'E') ? 'fas fa-circle text-warning' : ((ordenesEdit.estado == 'A') ? 'fas fa-circle text-success' : 'fas fa-circle text-danger')">
                            </i>
                            {{ (ordenesEdit.estado == 'C') ? 'Pagado' : (ordenesEdit.estado == 'E') ? 'Emitido' : ((ordenesEdit.estado == 'A') ? 'Aprobado' : 'Negado') }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-2 mb-3">
                <div class="col-4">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold" style="width: 155px;">No. Documento</span></div>
                        <input type="text" class="form-control form-control-sm" readonly [(ngModel)]="ordenesEdit.documento">
                    </div>
                </div>
                <!-- col-1.425 -->
                <div class="col-4">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span  class="input-group-text font-weight-bold">No.</span></div>
                        <input type="text" class="form-control form-control-sm" readonly [(ngModel)]="ordenesEdit.id_documento">
                    </div>
                </div>
                <div class="col-4">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo">Fecha</span></div>
                        <input disabled type="date" class="form-control form-control-sm" [(ngModel)]="gestOrden.fecha">
                    </div>
                </div>
            </div>
            <div class="row mt-2 mb-3">
                <div class="col-4">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo">No. Proceso</span></div>
                        <input type="text" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.nro_proceso" maxlength="20" placeholder="No. Proceso">
                    </div>
                </div>
                <!-- col-1.425 -->
                <div class="col-4">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span  class="input-group-text font-weight-bold size-span-campo">Nombre Proceso</span></div>
                        <input type="text" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.nombre_proceso" maxlength="200" placeholder="Nombre Proceso">
                    </div>
                </div>
                <!-- col-2.675 -->
                <div class="col-4">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span  class="input-group-text font-weight-bold size-span-campo">Monto Proceso</span></div>
                        <input type="text" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.monto_proceso" maxlength="17" placeholder="Monto Proceso" (keypress)="validaciones.numberOnlyDot($event)">
                    </div>
                </div>
            </div>
            <div class="row mt-2 mb-3">
                <div class="col-6">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold size-span-campo" style="width: 155px;">No. P&oacute;liza</span></div>
                        <input type="text" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.nro_poliza" maxlength="20" placeholder="No. P&oacute;liza">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span  class="input-group-text font-weight-bold size-span-campo">Vigencia P&oacute;liza</span></div>
                        <input  type="date" class="form-control form-control-sm"  [(ngModel)]="gestOrden.vigencia_poliza" placeholder="Vigencia P&oacute;liza">
                    </div>
                </div>

            </div>
            <div class="row mt-2 mb-3">
                <div class="col-4">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend">
                            <span class="input-group-text font-weight-bold size-span-campo" id="inputGroup-sizing-sm">Tipo Desembolso</span>
                        </div>
                        <ng-select id="estado" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.tipo_desembolso" maxlength="5">
                            <ng-option disabled [value]="0">Seleccione un tipo</ng-option>
                            <ng-option *ngFor="let op of tipoDesembolso" [value]="op.valor">
                            {{ op.descripcion }}</ng-option>
                        </ng-select>
                    </div>
                </div>
                <!-- <div class="col-8">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold text-white" style="width: 155px; background-color: #404A62;">Observaciones</span></div>
                        <textarea cols="30" rows="3" class="form-control form-control-sm"  [(ngModel)]="ordenesEdit.observacion" placeholder="Observaciones"></textarea>
                    </div>
                </div> -->
            </div>

            <div class="row mb-2">
                <div class="col">
                    <div class="table-responsive">
                        <table class="table table-bordered no-footer table-hover mb-0">
                            <thead class="thead-dark">
                                <tr class="text-center">
                                    <th style="width: 15%;">Conceptos</th>
                                    <th style="width: 30%;">Comentario</th>
                                    <th class="text-right" style="width: 15%;">Valor</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngIf="ordenesDet.length == 0" >
                                    <td colspan="5" class="text-center"><h6 class="my-1">No hay conceptos</h6></td>
                                </tr>
                                <ng-container>
                                    <tr *ngFor="let dt of ordenesDet, let i = index">
                                        <td class="text-center">{{dt.descripcion}}</td>
                                        <td class="text-center">
                                            <textarea class="form-control form-control-sm" type="text" [(ngModel)]="dt.comentario">{{dt.comentario}}</textarea>
                                            <!-- {{dt.comentario}} -->
                                        </td>
                                        <!-- <td class="text-center">{{dt.comentario}}</td> -->
                                        <td class="text-right">{{dt.valor}}</td>
                                    </tr>
                                </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="row my-2 justify-content-end">
                <div class="col-6">
                    <div class="input-group input-group-lg input-group-subtotal">
                        <div class="input-group-prepend"><span class="input-group-text font-weight-bold" style="width: 200px;">&Sigma; Valor pagado</span></div>
                        <input id="pagoTotal" type="text" class="form-control form-control-lg font-weight-bold text-right" readonly value="$ {{ ordenesEdit.total | number: '1.2-2' }}">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center" style="font-family: 'Poppins1';">
        <div class="col-12 text-left" style="position: fixed; bottom: 0px; left: 25px;">
            <span style="color: #13A1EA;">
                Fecha: {{ ordenesEdit.fecha_gestion }}</span>
        </div>
        <div *ngIf="dataUser" class="col-12 text-left" style="position: fixed; bottom: 20px; left: 25px;">
            <span style="color: #13A1EA;">
                Usuario: {{ dataUser.nombre }}</span>
        </div>
    </div>
</div>
